{"ast":null,"code":"var __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\nvar __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _ProductLauncher_product;\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { existsSync } from 'fs';\nimport os, { tmpdir } from 'os';\nimport { join } from 'path';\n/**\n * Describes a launcher - a class that is able to create and launch a browser instance.\n *\n * @public\n */\nexport class ProductLauncher {\n  /**\n   * @internal\n   */\n  constructor(puppeteer, product) {\n    _ProductLauncher_product.set(this, void 0);\n    this.puppeteer = puppeteer;\n    __classPrivateFieldSet(this, _ProductLauncher_product, product, \"f\");\n  }\n  get product() {\n    return __classPrivateFieldGet(this, _ProductLauncher_product, \"f\");\n  }\n  launch() {\n    throw new Error('Not implemented');\n  }\n  executablePath() {\n    throw new Error('Not implemented');\n  }\n  defaultArgs() {\n    throw new Error('Not implemented');\n  }\n  /**\n   * Set only for Firefox, after the launcher resolves the `latest` revision to\n   * the actual revision.\n   * @internal\n   */\n  getActualBrowserRevision() {\n    return this.actualBrowserRevision;\n  }\n  /**\n   * @internal\n   */\n  getProfilePath() {\n    var _a;\n    return join((_a = this.puppeteer.configuration.temporaryDirectory) !== null && _a !== void 0 ? _a : tmpdir(), `puppeteer_dev_${this.product}_profile-`);\n  }\n  /**\n   * @internal\n   */\n  resolveExecutablePath() {\n    const executablePath = this.puppeteer.configuration.executablePath;\n    if (executablePath) {\n      if (!existsSync(executablePath)) {\n        throw new Error(`Tried to find the browser at the configured path (${executablePath}), but no executable was found.`);\n      }\n      return executablePath;\n    }\n    const ubuntuChromiumPath = '/usr/bin/chromium-browser';\n    if (this.product === 'chrome' && os.platform() !== 'darwin' && os.arch() === 'arm64' && existsSync(ubuntuChromiumPath)) {\n      return ubuntuChromiumPath;\n    }\n    const browserFetcher = this.puppeteer.createBrowserFetcher({\n      product: this.product,\n      path: this.puppeteer.defaultDownloadPath\n    });\n    const revisionInfo = browserFetcher.revisionInfo(this.puppeteer.browserRevision);\n    if (!revisionInfo.local) {\n      if (this.puppeteer.configuration.browserRevision) {\n        throw new Error(`Tried to find the browser at the configured path (${revisionInfo.executablePath}) for revision ${this.puppeteer.browserRevision}, but no executable was found.`);\n      }\n      switch (this.product) {\n        case 'chrome':\n          throw new Error(`Could not find Chromium (rev. ${this.puppeteer.browserRevision}). This can occur if either\\n` + ' 1. you did not perform an installation before running the script (e.g. `npm install`) or\\n' + ` 2. your cache path is incorrectly configured (which is: ${this.puppeteer.configuration.cacheDirectory}).\\n` + 'For (2), check out our guide on configuring puppeteer at https://pptr.dev/guides/configuration.');\n        case 'firefox':\n          throw new Error(`Could not find Firefox (rev. ${this.puppeteer.browserRevision}). This can occur if either\\n` + ' 1. you did not perform an installation for Firefox before running the script (e.g. `PUPPETEER_PRODUCT=firefox npm install`) or\\n' + ` 2. your cache path is incorrectly configured (which is: ${this.puppeteer.configuration.cacheDirectory}).\\n` + 'For (2), check out our guide on configuring puppeteer at https://pptr.dev/guides/configuration.');\n      }\n    }\n    return revisionInfo.executablePath;\n  }\n}\n_ProductLauncher_product = new WeakMap();","map":{"version":3,"names":["existsSync","os","tmpdir","join","ProductLauncher","constructor","puppeteer","product","_ProductLauncher_product","set","__classPrivateFieldSet","__classPrivateFieldGet","launch","Error","executablePath","defaultArgs","getActualBrowserRevision","actualBrowserRevision","getProfilePath","_a","configuration","temporaryDirectory","resolveExecutablePath","ubuntuChromiumPath","platform","arch","browserFetcher","createBrowserFetcher","path","defaultDownloadPath","revisionInfo","browserRevision","local","cacheDirectory"],"sources":["../../../../src/node/ProductLauncher.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}