{"ast":null,"code":"/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\nvar __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _Frame_url, _Frame_detached, _Frame_client;\nimport { assert } from '../util/assert.js';\nimport { isErrorLike } from '../util/ErrorLike.js';\nimport { getQueryHandlerAndSelector } from './GetQueryHandler.js';\nimport { IsolatedWorld } from './IsolatedWorld.js';\nimport { MAIN_WORLD, PUPPETEER_WORLD } from './IsolatedWorlds.js';\nimport { LazyArg } from './LazyArg.js';\nimport { LifecycleWatcher } from './LifecycleWatcher.js';\nimport { importFS } from './util.js';\n/**\n * Represents a DOM frame.\n *\n * To understand frames, you can think of frames as `<iframe>` elements. Just\n * like iframes, frames can be nested, and when JavaScript is executed in a\n * frame, the JavaScript does not effect frames inside the ambient frame the\n * JavaScript executes in.\n *\n * @example\n * At any point in time, {@link Page | pages} expose their current frame\n * tree via the {@link Page.mainFrame} and {@link Frame.childFrames} methods.\n *\n * @example\n * An example of dumping frame tree:\n *\n * ```ts\n * import puppeteer from 'puppeteer';\n *\n * (async () => {\n *   const browser = await puppeteer.launch();\n *   const page = await browser.newPage();\n *   await page.goto('https://www.google.com/chrome/browser/canary.html');\n *   dumpFrameTree(page.mainFrame(), '');\n *   await browser.close();\n *\n *   function dumpFrameTree(frame, indent) {\n *     console.log(indent + frame.url());\n *     for (const child of frame.childFrames()) {\n *       dumpFrameTree(child, indent + '  ');\n *     }\n *   }\n * })();\n * ```\n *\n * @example\n * An example of getting text from an iframe element:\n *\n * ```ts\n * const frame = page.frames().find(frame => frame.name() === 'myframe');\n * const text = await frame.$eval('.selector', element => element.textContent);\n * console.log(text);\n * ```\n *\n * @remarks\n * Frame lifecycles are controlled by three events that are all dispatched on\n * the parent {@link Frame.page | page}:\n *\n * - {@link PageEmittedEvents.FrameAttached}\n * - {@link PageEmittedEvents.FrameNavigated}\n * - {@link PageEmittedEvents.FrameDetached}\n *\n * @public\n */\nexport class Frame {\n  /**\n   * @internal\n   */\n  constructor(frameManager, frameId, parentFrameId, client) {\n    _Frame_url.set(this, '');\n    _Frame_detached.set(this, false);\n    _Frame_client.set(this, void 0);\n    /**\n     * @internal\n     */\n    this._loaderId = '';\n    /**\n     * @internal\n     */\n    this._hasStartedLoading = false;\n    /**\n     * @internal\n     */\n    this._lifecycleEvents = new Set();\n    this._frameManager = frameManager;\n    __classPrivateFieldSet(this, _Frame_url, '', \"f\");\n    this._id = frameId;\n    this._parentId = parentFrameId;\n    __classPrivateFieldSet(this, _Frame_detached, false, \"f\");\n    this._loaderId = '';\n    this.updateClient(client);\n  }\n  /**\n   * @internal\n   */\n  updateClient(client) {\n    __classPrivateFieldSet(this, _Frame_client, client, \"f\");\n    this.worlds = {\n      [MAIN_WORLD]: new IsolatedWorld(this),\n      [PUPPETEER_WORLD]: new IsolatedWorld(this)\n    };\n  }\n  /**\n   * @returns The page associated with the frame.\n   */\n  page() {\n    return this._frameManager.page();\n  }\n  /**\n   * @returns `true` if the frame is an out-of-process (OOP) frame. Otherwise,\n   * `false`.\n   */\n  isOOPFrame() {\n    return __classPrivateFieldGet(this, _Frame_client, \"f\") !== this._frameManager.client;\n  }\n  /**\n   * Navigates a frame to the given url.\n   *\n   * @remarks\n   * Navigation to `about:blank` or navigation to the same URL with a different\n   * hash will succeed and return `null`.\n   *\n   * :::warning\n   *\n   * Headless mode doesn't support navigation to a PDF document. See the {@link\n   * https://bugs.chromium.org/p/chromium/issues/detail?id=761295 | upstream\n   * issue}.\n   *\n   * :::\n   *\n   * @param url - the URL to navigate the frame to. This should include the\n   * scheme, e.g. `https://`.\n   * @param options - navigation options. `waitUntil` is useful to define when\n   * the navigation should be considered successful - see the docs for\n   * {@link PuppeteerLifeCycleEvent} for more details.\n   *\n   * @returns A promise which resolves to the main resource response. In case of\n   * multiple redirects, the navigation will resolve with the response of the\n   * last redirect.\n   * @throws This method will throw an error if:\n   *\n   * - there's an SSL error (e.g. in case of self-signed certificates).\n   * - target URL is invalid.\n   * - the `timeout` is exceeded during navigation.\n   * - the remote server does not respond or is unreachable.\n   * - the main resource failed to load.\n   *\n   * This method will not throw an error when any valid HTTP status code is\n   * returned by the remote server, including 404 \"Not Found\" and 500 \"Internal\n   * Server Error\". The status code for such responses can be retrieved by\n   * calling {@link HTTPResponse.status}.\n   */\n  async goto(url) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const {\n      referer = this._frameManager.networkManager.extraHTTPHeaders()['referer'],\n      referrerPolicy = this._frameManager.networkManager.extraHTTPHeaders()['referer-policy'],\n      waitUntil = ['load'],\n      timeout = this._frameManager.timeoutSettings.navigationTimeout()\n    } = options;\n    let ensureNewDocumentNavigation = false;\n    const watcher = new LifecycleWatcher(this._frameManager, this, waitUntil, timeout);\n    let error = await Promise.race([navigate(__classPrivateFieldGet(this, _Frame_client, \"f\"), url, referer, referrerPolicy, this._id), watcher.timeoutOrTerminationPromise()]);\n    if (!error) {\n      error = await Promise.race([watcher.timeoutOrTerminationPromise(), ensureNewDocumentNavigation ? watcher.newDocumentNavigationPromise() : watcher.sameDocumentNavigationPromise()]);\n    }\n    try {\n      if (error) {\n        throw error;\n      }\n      return await watcher.navigationResponse();\n    } finally {\n      watcher.dispose();\n    }\n    async function navigate(client, url, referrer, referrerPolicy, frameId) {\n      try {\n        const response = await client.send('Page.navigate', {\n          url,\n          referrer,\n          frameId,\n          referrerPolicy\n        });\n        ensureNewDocumentNavigation = !!response.loaderId;\n        if (response.errorText === 'net::ERR_HTTP_RESPONSE_CODE_FAILURE') {\n          return null;\n        }\n        return response.errorText ? new Error(`${response.errorText} at ${url}`) : null;\n      } catch (error) {\n        if (isErrorLike(error)) {\n          return error;\n        }\n        throw error;\n      }\n    }\n  }\n  /**\n   * Waits for the frame to navigate. It is useful for when you run code which\n   * will indirectly cause the frame to navigate.\n   *\n   * Usage of the\n   * {@link https://developer.mozilla.org/en-US/docs/Web/API/History_API | History API}\n   * to change the URL is considered a navigation.\n   *\n   * @example\n   *\n   * ```ts\n   * const [response] = await Promise.all([\n   *   // The navigation promise resolves after navigation has finished\n   *   frame.waitForNavigation(),\n   *   // Clicking the link will indirectly cause a navigation\n   *   frame.click('a.my-link'),\n   * ]);\n   * ```\n   *\n   * @param options - options to configure when the navigation is consided\n   * finished.\n   * @returns a promise that resolves when the frame navigates to a new URL.\n   */\n  async waitForNavigation() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      waitUntil = ['load'],\n      timeout = this._frameManager.timeoutSettings.navigationTimeout()\n    } = options;\n    const watcher = new LifecycleWatcher(this._frameManager, this, waitUntil, timeout);\n    const error = await Promise.race([watcher.timeoutOrTerminationPromise(), watcher.sameDocumentNavigationPromise(), watcher.newDocumentNavigationPromise()]);\n    try {\n      if (error) {\n        throw error;\n      }\n      return await watcher.navigationResponse();\n    } finally {\n      watcher.dispose();\n    }\n  }\n  /**\n   * @internal\n   */\n  _client() {\n    return __classPrivateFieldGet(this, _Frame_client, \"f\");\n  }\n  /**\n   * @internal\n   */\n  executionContext() {\n    return this.worlds[MAIN_WORLD].executionContext();\n  }\n  /**\n   * Behaves identically to {@link Page.evaluateHandle} except it's run within\n   * the context of this frame.\n   *\n   * @see {@link Page.evaluateHandle} for details.\n   */\n  async evaluateHandle(pageFunction) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    return this.worlds[MAIN_WORLD].evaluateHandle(pageFunction, ...args);\n  }\n  /**\n   * Behaves identically to {@link Page.evaluate} except it's run within the\n   * the context of this frame.\n   *\n   * @see {@link Page.evaluate} for details.\n   */\n  async evaluate(pageFunction) {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n    return this.worlds[MAIN_WORLD].evaluate(pageFunction, ...args);\n  }\n  /**\n   * Queries the frame for an element matching the given selector.\n   *\n   * @param selector - The selector to query for.\n   * @returns A {@link ElementHandle | element handle} to the first element\n   * matching the given selector. Otherwise, `null`.\n   */\n  async $(selector) {\n    return this.worlds[MAIN_WORLD].$(selector);\n  }\n  /**\n   * Queries the frame for all elements matching the given selector.\n   *\n   * @param selector - The selector to query for.\n   * @returns An array of {@link ElementHandle | element handles} that point to\n   * elements matching the given selector.\n   */\n  async $$(selector) {\n    return this.worlds[MAIN_WORLD].$$(selector);\n  }\n  /**\n   * Runs the given function on the first element matching the given selector in\n   * the frame.\n   *\n   * If the given function returns a promise, then this method will wait till\n   * the promise resolves.\n   *\n   * @example\n   *\n   * ```ts\n   * const searchValue = await frame.$eval('#search', el => el.value);\n   * ```\n   *\n   * @param selector - The selector to query for.\n   * @param pageFunction - The function to be evaluated in the frame's context.\n   * The first element matching the selector will be passed to the function as\n   * its first argument.\n   * @param args - Additional arguments to pass to `pageFunction`.\n   * @returns A promise to the result of the function.\n   */\n  async $eval(selector, pageFunction) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n      args[_key3 - 2] = arguments[_key3];\n    }\n    return this.worlds[MAIN_WORLD].$eval(selector, pageFunction, ...args);\n  }\n  /**\n   * Runs the given function on an array of elements matching the given selector\n   * in the frame.\n   *\n   * If the given function returns a promise, then this method will wait till\n   * the promise resolves.\n   *\n   * @example\n   *\n   * ```js\n   * const divsCounts = await frame.$$eval('div', divs => divs.length);\n   * ```\n   *\n   * @param selector - The selector to query for.\n   * @param pageFunction - The function to be evaluated in the frame's context.\n   * An array of elements matching the given selector will be passed to the\n   * function as its first argument.\n   * @param args - Additional arguments to pass to `pageFunction`.\n   * @returns A promise to the result of the function.\n   */\n  async $$eval(selector, pageFunction) {\n    for (var _len4 = arguments.length, args = new Array(_len4 > 2 ? _len4 - 2 : 0), _key4 = 2; _key4 < _len4; _key4++) {\n      args[_key4 - 2] = arguments[_key4];\n    }\n    return this.worlds[MAIN_WORLD].$$eval(selector, pageFunction, ...args);\n  }\n  /**\n   * @deprecated Use {@link Frame.$$} with the `xpath` prefix.\n   *\n   * Example: `await frame.$$('xpath/' + xpathExpression)`\n   *\n   * This method evaluates the given XPath expression and returns the results.\n   * If `xpath` starts with `//` instead of `.//`, the dot will be appended\n   * automatically.\n   * @param expression - the XPath expression to evaluate.\n   */\n  async $x(expression) {\n    return this.worlds[MAIN_WORLD].$x(expression);\n  }\n  /**\n   * Waits for an element matching the given selector to appear in the frame.\n   *\n   * This method works across navigations.\n   *\n   * @example\n   *\n   * ```ts\n   * import puppeteer from 'puppeteer';\n   *\n   * (async () => {\n   *   const browser = await puppeteer.launch();\n   *   const page = await browser.newPage();\n   *   let currentURL;\n   *   page\n   *     .mainFrame()\n   *     .waitForSelector('img')\n   *     .then(() => console.log('First URL with image: ' + currentURL));\n   *\n   *   for (currentURL of [\n   *     'https://example.com',\n   *     'https://google.com',\n   *     'https://bbc.com',\n   *   ]) {\n   *     await page.goto(currentURL);\n   *   }\n   *   await browser.close();\n   * })();\n   * ```\n   *\n   * @param selector - The selector to query and wait for.\n   * @param options - Options for customizing waiting behavior.\n   * @returns An element matching the given selector.\n   * @throws Throws if an element matching the given selector doesn't appear.\n   */\n  async waitForSelector(selector) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const {\n      updatedSelector,\n      QueryHandler\n    } = getQueryHandlerAndSelector(selector);\n    return await QueryHandler.waitFor(this, updatedSelector, options);\n  }\n  /**\n   * @deprecated Use {@link Frame.waitForSelector} with the `xpath` prefix.\n   *\n   * Example: `await frame.waitForSelector('xpath/' + xpathExpression)`\n   *\n   * The method evaluates the XPath expression relative to the Frame.\n   * If `xpath` starts with `//` instead of `.//`, the dot will be appended\n   * automatically.\n   *\n   * Wait for the `xpath` to appear in page. If at the moment of calling the\n   * method the `xpath` already exists, the method will return immediately. If\n   * the xpath doesn't appear after the `timeout` milliseconds of waiting, the\n   * function will throw.\n   *\n   * For a code example, see the example for {@link Frame.waitForSelector}. That\n   * function behaves identically other than taking a CSS selector rather than\n   * an XPath.\n   *\n   * @param xpath - the XPath expression to wait for.\n   * @param options - options to configure the visibility of the element and how\n   * long to wait before timing out.\n   */\n  async waitForXPath(xpath) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (xpath.startsWith('//')) {\n      xpath = `.${xpath}`;\n    }\n    return this.waitForSelector(`xpath/${xpath}`, options);\n  }\n  /**\n   * @example\n   * The `waitForFunction` can be used to observe viewport size change:\n   *\n   * ```ts\n   * import puppeteer from 'puppeteer';\n   *\n   * (async () => {\n   * .  const browser = await puppeteer.launch();\n   * .  const page = await browser.newPage();\n   * .  const watchDog = page.mainFrame().waitForFunction('window.innerWidth < 100');\n   * .  page.setViewport({width: 50, height: 50});\n   * .  await watchDog;\n   * .  await browser.close();\n   * })();\n   * ```\n   *\n   * To pass arguments from Node.js to the predicate of `page.waitForFunction` function:\n   *\n   * ```ts\n   * const selector = '.foo';\n   * await frame.waitForFunction(\n   *   selector => !!document.querySelector(selector),\n   *   {}, // empty options object\n   *   selector\n   * );\n   * ```\n   *\n   * @param pageFunction - the function to evaluate in the frame context.\n   * @param options - options to configure the polling method and timeout.\n   * @param args - arguments to pass to the `pageFunction`.\n   * @returns the promise which resolve when the `pageFunction` returns a truthy value.\n   */\n  waitForFunction(pageFunction) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    for (var _len5 = arguments.length, args = new Array(_len5 > 2 ? _len5 - 2 : 0), _key5 = 2; _key5 < _len5; _key5++) {\n      args[_key5 - 2] = arguments[_key5];\n    }\n    return this.worlds[MAIN_WORLD].waitForFunction(pageFunction, options, ...args);\n  }\n  /**\n   * @returns The full HTML contents of the frame, including the DOCTYPE.\n   */\n  async content() {\n    return this.worlds[PUPPETEER_WORLD].content();\n  }\n  /**\n   * Set the content of the frame.\n   *\n   * @param html - HTML markup to assign to the page.\n   * @param options - Options to configure how long before timing out and at\n   * what point to consider the content setting successful.\n   */\n  async setContent(html) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return this.worlds[PUPPETEER_WORLD].setContent(html, options);\n  }\n  /**\n   * @returns The frame's `name` attribute as specified in the tag.\n   *\n   * @remarks\n   * If the name is empty, it returns the `id` attribute instead.\n   *\n   * @remarks\n   * This value is calculated once when the frame is created, and will not\n   * update if the attribute is changed later.\n   */\n  name() {\n    return this._name || '';\n  }\n  /**\n   * @returns The frame's URL.\n   */\n  url() {\n    return __classPrivateFieldGet(this, _Frame_url, \"f\");\n  }\n  /**\n   * @returns The parent frame, if any. Detached and main frames return `null`.\n   */\n  parentFrame() {\n    return this._frameManager._frameTree.parentFrame(this._id) || null;\n  }\n  /**\n   * @returns An array of child frames.\n   */\n  childFrames() {\n    return this._frameManager._frameTree.childFrames(this._id);\n  }\n  /**\n   * @returns `true` if the frame has been detached. Otherwise, `false`.\n   */\n  isDetached() {\n    return __classPrivateFieldGet(this, _Frame_detached, \"f\");\n  }\n  /**\n   * Adds a `<script>` tag into the page with the desired url or content.\n   *\n   * @param options - Options for the script.\n   * @returns An {@link ElementHandle | element handle} to the injected\n   * `<script>` element.\n   */\n  async addScriptTag(options) {\n    let {\n      content = '',\n      type\n    } = options;\n    const {\n      path\n    } = options;\n    if (+!!options.url + +!!path + +!!content !== 1) {\n      throw new Error('Exactly one of `url`, `path`, or `content` must be specified.');\n    }\n    if (path) {\n      let fs;\n      try {\n        fs = (await import('fs')).promises;\n      } catch (error) {\n        if (error instanceof TypeError) {\n          throw new Error('Can only pass a file path in a Node-like environment.');\n        }\n        throw error;\n      }\n      content = await fs.readFile(path, 'utf8');\n      content += `//# sourceURL=${path.replace(/\\n/g, '')}`;\n    }\n    type = type !== null && type !== void 0 ? type : 'text/javascript';\n    return this.worlds[MAIN_WORLD].transferHandle(await this.worlds[PUPPETEER_WORLD].evaluateHandle(async (_ref, _ref2) => {\n      let {\n        createDeferredPromise\n      } = _ref;\n      let {\n        url,\n        id,\n        type,\n        content\n      } = _ref2;\n      const promise = createDeferredPromise();\n      const script = document.createElement('script');\n      script.type = type;\n      script.text = content;\n      if (url) {\n        script.src = url;\n        script.addEventListener('load', () => {\n          return promise.resolve();\n        }, {\n          once: true\n        });\n        script.addEventListener('error', event => {\n          var _a;\n          promise.reject(new Error((_a = event.message) !== null && _a !== void 0 ? _a : 'Could not load script'));\n        }, {\n          once: true\n        });\n      } else {\n        promise.resolve();\n      }\n      if (id) {\n        script.id = id;\n      }\n      document.head.appendChild(script);\n      await promise;\n      return script;\n    }, LazyArg.create(context => {\n      return context.puppeteerUtil;\n    }), {\n      ...options,\n      type,\n      content\n    }));\n  }\n  async addStyleTag(options) {\n    let {\n      content = ''\n    } = options;\n    const {\n      path\n    } = options;\n    if (+!!options.url + +!!path + +!!content !== 1) {\n      throw new Error('Exactly one of `url`, `path`, or `content` must be specified.');\n    }\n    if (path) {\n      let fs;\n      try {\n        fs = (await importFS()).promises;\n      } catch (error) {\n        if (error instanceof TypeError) {\n          throw new Error('Can only pass a file path in a Node-like environment.');\n        }\n        throw error;\n      }\n      content = await fs.readFile(path, 'utf8');\n      content += '/*# sourceURL=' + path.replace(/\\n/g, '') + '*/';\n      options.content = content;\n    }\n    return this.worlds[MAIN_WORLD].transferHandle(await this.worlds[PUPPETEER_WORLD].evaluateHandle(async (_ref3, _ref4) => {\n      let {\n        createDeferredPromise\n      } = _ref3;\n      let {\n        url,\n        content\n      } = _ref4;\n      const promise = createDeferredPromise();\n      let element;\n      if (!url) {\n        element = document.createElement('style');\n        element.appendChild(document.createTextNode(content));\n      } else {\n        const link = document.createElement('link');\n        link.rel = 'stylesheet';\n        link.href = url;\n        element = link;\n      }\n      element.addEventListener('load', () => {\n        promise.resolve();\n      }, {\n        once: true\n      });\n      element.addEventListener('error', event => {\n        var _a;\n        promise.reject(new Error((_a = event.message) !== null && _a !== void 0 ? _a : 'Could not load style'));\n      }, {\n        once: true\n      });\n      document.head.appendChild(element);\n      await promise;\n      return element;\n    }, LazyArg.create(context => {\n      return context.puppeteerUtil;\n    }), options));\n  }\n  /**\n   * Clicks the first element found that matches `selector`.\n   *\n   * @remarks\n   * If `click()` triggers a navigation event and there's a separate\n   * `page.waitForNavigation()` promise to be resolved, you may end up with a\n   * race condition that yields unexpected results. The correct pattern for\n   * click and wait for navigation is the following:\n   *\n   * ```ts\n   * const [response] = await Promise.all([\n   *   page.waitForNavigation(waitOptions),\n   *   frame.click(selector, clickOptions),\n   * ]);\n   * ```\n   *\n   * @param selector - The selector to query for.\n   */\n  async click(selector) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return this.worlds[PUPPETEER_WORLD].click(selector, options);\n  }\n  /**\n   * Focuses the first element that matches the `selector`.\n   *\n   * @param selector - The selector to query for.\n   * @throws Throws if there's no element matching `selector`.\n   */\n  async focus(selector) {\n    return this.worlds[PUPPETEER_WORLD].focus(selector);\n  }\n  /**\n   * Hovers the pointer over the center of the first element that matches the\n   * `selector`.\n   *\n   * @param selector - The selector to query for.\n   * @throws Throws if there's no element matching `selector`.\n   */\n  async hover(selector) {\n    return this.worlds[PUPPETEER_WORLD].hover(selector);\n  }\n  /**\n   * Selects a set of value on the first `<select>` element that matches the\n   * `selector`.\n   *\n   * @example\n   *\n   * ```ts\n   * frame.select('select#colors', 'blue'); // single selection\n   * frame.select('select#colors', 'red', 'green', 'blue'); // multiple selections\n   * ```\n   *\n   * @param selector - The selector to query for.\n   * @param values - The array of values to select. If the `<select>` has the\n   * `multiple` attribute, all values are considered, otherwise only the first\n   * one is taken into account.\n   * @returns the list of values that were successfully selected.\n   * @throws Throws if there's no `<select>` matching `selector`.\n   */\n  select(selector) {\n    for (var _len6 = arguments.length, values = new Array(_len6 > 1 ? _len6 - 1 : 0), _key6 = 1; _key6 < _len6; _key6++) {\n      values[_key6 - 1] = arguments[_key6];\n    }\n    return this.worlds[PUPPETEER_WORLD].select(selector, ...values);\n  }\n  /**\n   * Taps the first element that matches the `selector`.\n   *\n   * @param selector - The selector to query for.\n   * @throws Throws if there's no element matching `selector`.\n   */\n  async tap(selector) {\n    return this.worlds[PUPPETEER_WORLD].tap(selector);\n  }\n  /**\n   * Sends a `keydown`, `keypress`/`input`, and `keyup` event for each character\n   * in the text.\n   *\n   * @remarks\n   * To press a special key, like `Control` or `ArrowDown`, use\n   * {@link Keyboard.press}.\n   *\n   * @example\n   *\n   * ```ts\n   * await frame.type('#mytextarea', 'Hello'); // Types instantly\n   * await frame.type('#mytextarea', 'World', {delay: 100}); // Types slower, like a user\n   * ```\n   *\n   * @param selector - the selector for the element to type into. If there are\n   * multiple the first will be used.\n   * @param text - text to type into the element\n   * @param options - takes one option, `delay`, which sets the time to wait\n   * between key presses in milliseconds. Defaults to `0`.\n   */\n  async type(selector, text, options) {\n    return this.worlds[PUPPETEER_WORLD].type(selector, text, options);\n  }\n  /**\n   * @deprecated Replace with `new Promise(r => setTimeout(r, milliseconds));`.\n   *\n   * Causes your script to wait for the given number of milliseconds.\n   *\n   * @remarks\n   * It's generally recommended to not wait for a number of seconds, but instead\n   * use {@link Frame.waitForSelector}, {@link Frame.waitForXPath} or\n   * {@link Frame.waitForFunction} to wait for exactly the conditions you want.\n   *\n   * @example\n   *\n   * Wait for 1 second:\n   *\n   * ```ts\n   * await frame.waitForTimeout(1000);\n   * ```\n   *\n   * @param milliseconds - the number of milliseconds to wait.\n   */\n  waitForTimeout(milliseconds) {\n    return new Promise(resolve => {\n      setTimeout(resolve, milliseconds);\n    });\n  }\n  /**\n   * @returns the frame's title.\n   */\n  async title() {\n    return this.worlds[PUPPETEER_WORLD].title();\n  }\n  /**\n   * @internal\n   */\n  _deviceRequestPromptManager() {\n    if (this.isOOPFrame()) {\n      return this._frameManager._deviceRequestPromptManager(__classPrivateFieldGet(this, _Frame_client, \"f\"));\n    }\n    const parentFrame = this.parentFrame();\n    assert(parentFrame !== null);\n    return parentFrame._deviceRequestPromptManager();\n  }\n  /**\n   * This method is typically coupled with an action that triggers a device\n   * request from an api such as WebBluetooth.\n   *\n   * :::caution\n   *\n   * This must be called before the device request is made. It will not return a\n   * currently active device prompt.\n   *\n   * :::\n   *\n   * @example\n   *\n   * ```ts\n   * const [devicePrompt] = Promise.all([\n   *   frame.waitForDevicePrompt(),\n   *   frame.click('#connect-bluetooth'),\n   * ]);\n   * await devicePrompt.select(\n   *   await devicePrompt.waitForDevice(({name}) => name.includes('My Device'))\n   * );\n   * ```\n   */\n  waitForDevicePrompt() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return this._deviceRequestPromptManager().waitForDevicePrompt(options);\n  }\n  /**\n   * @internal\n   */\n  _navigated(framePayload) {\n    this._name = framePayload.name;\n    __classPrivateFieldSet(this, _Frame_url, `${framePayload.url}${framePayload.urlFragment || ''}`, \"f\");\n  }\n  /**\n   * @internal\n   */\n  _navigatedWithinDocument(url) {\n    __classPrivateFieldSet(this, _Frame_url, url, \"f\");\n  }\n  /**\n   * @internal\n   */\n  _onLifecycleEvent(loaderId, name) {\n    if (name === 'init') {\n      this._loaderId = loaderId;\n      this._lifecycleEvents.clear();\n    }\n    this._lifecycleEvents.add(name);\n  }\n  /**\n   * @internal\n   */\n  _onLoadingStopped() {\n    this._lifecycleEvents.add('DOMContentLoaded');\n    this._lifecycleEvents.add('load');\n  }\n  /**\n   * @internal\n   */\n  _onLoadingStarted() {\n    this._hasStartedLoading = true;\n  }\n  /**\n   * @internal\n   */\n  _detach() {\n    __classPrivateFieldSet(this, _Frame_detached, true, \"f\");\n    this.worlds[MAIN_WORLD]._detach();\n    this.worlds[PUPPETEER_WORLD]._detach();\n  }\n}\n_Frame_url = new WeakMap(), _Frame_detached = new WeakMap(), _Frame_client = new WeakMap();","map":{"version":3,"names":["assert","isErrorLike","getQueryHandlerAndSelector","IsolatedWorld","MAIN_WORLD","PUPPETEER_WORLD","LazyArg","LifecycleWatcher","importFS","Frame","constructor","frameManager","frameId","parentFrameId","client","_Frame_url","set","_Frame_detached","_Frame_client","_loaderId","_hasStartedLoading","_lifecycleEvents","Set","_frameManager","__classPrivateFieldSet","_id","_parentId","updateClient","worlds","page","isOOPFrame","__classPrivateFieldGet","goto","url","options","arguments","length","undefined","referer","networkManager","extraHTTPHeaders","referrerPolicy","waitUntil","timeout","timeoutSettings","navigationTimeout","ensureNewDocumentNavigation","watcher","error","Promise","race","navigate","timeoutOrTerminationPromise","newDocumentNavigationPromise","sameDocumentNavigationPromise","navigationResponse","dispose","referrer","response","send","loaderId","errorText","Error","waitForNavigation","_client","executionContext","evaluateHandle","pageFunction","_len","args","Array","_key","evaluate","_len2","_key2","$","selector","$$","$eval","_len3","_key3","$$eval","_len4","_key4","$x","expression","waitForSelector","updatedSelector","QueryHandler","waitFor","waitForXPath","xpath","startsWith","waitForFunction","_len5","_key5","content","setContent","html","name","_name","parentFrame","_frameTree","childFrames","isDetached","addScriptTag","type","path","fs","promises","TypeError","readFile","replace","transferHandle","_ref","_ref2","createDeferredPromise","id","promise","script","document","createElement","text","src","addEventListener","resolve","once","event","reject","_a","message","head","appendChild","create","context","puppeteerUtil","addStyleTag","_ref3","_ref4","element","createTextNode","link","rel","href","click","focus","hover","select","_len6","values","_key6","tap","waitForTimeout","milliseconds","setTimeout","title","_deviceRequestPromptManager","waitForDevicePrompt","_navigated","framePayload","urlFragment","_navigatedWithinDocument","_onLifecycleEvent","clear","add","_onLoadingStopped","_onLoadingStarted","_detach"],"sources":["../../../../src/common/Frame.ts"],"sourcesContent":[null],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqBA,SAAQA,MAAM,QAAO,mBAAmB;AACxC,SAAQC,WAAW,QAAO,sBAAsB;AAShD,SAAQC,0BAA0B,QAAO,sBAAsB;AAE/D,SACEC,aAAa,QAGR,oBAAoB;AAC3B,SAAQC,UAAU,EAAEC,eAAe,QAAO,qBAAqB;AAC/D,SAAQC,OAAO,QAAO,cAAc;AACpC,SAAQC,gBAAgB,QAAgC,uBAAuB;AAE/E,SAAQC,QAAQ,QAAO,WAAW;AA8ElC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA,OAAM,MAAOC,KAAK;EAsChB;;;EAGAC,YACEC,YAA0B,EAC1BC,OAAe,EACfC,aAAiC,EACjCC,MAAkB;IA5CpBC,UAAA,CAAAC,GAAA,OAAO,EAAE;IACTC,eAAA,CAAAD,GAAA,OAAY,KAAK;IACjBE,aAAA,CAAAF,GAAA;IAcA;;;IAGA,KAAAG,SAAS,GAAG,EAAE;IAKd;;;IAGA,KAAAC,kBAAkB,GAAG,KAAK;IAC1B;;;IAGA,KAAAC,gBAAgB,GAAG,IAAIC,GAAG,EAAU;IAelC,IAAI,CAACC,aAAa,GAAGZ,YAAY;IACjCa,sBAAA,KAAI,EAAAT,UAAA,EAAQ,EAAE;IACd,IAAI,CAACU,GAAG,GAAGb,OAAO;IAClB,IAAI,CAACc,SAAS,GAAGb,aAAa;IAC9BW,sBAAA,KAAI,EAAAP,eAAA,EAAa,KAAK;IAEtB,IAAI,CAACE,SAAS,GAAG,EAAE;IAEnB,IAAI,CAACQ,YAAY,CAACb,MAAM,CAAC;EAC3B;EAEA;;;EAGAa,YAAYA,CAACb,MAAkB;IAC7BU,sBAAA,KAAI,EAAAN,aAAA,EAAWJ,MAAM;IACrB,IAAI,CAACc,MAAM,GAAG;MACZ,CAACxB,UAAU,GAAG,IAAID,aAAa,CAAC,IAAI,CAAC;MACrC,CAACE,eAAe,GAAG,IAAIF,aAAa,CAAC,IAAI;KAC1C;EACH;EAEA;;;EAGA0B,IAAIA,CAAA;IACF,OAAO,IAAI,CAACN,aAAa,CAACM,IAAI,EAAE;EAClC;EAEA;;;;EAIAC,UAAUA,CAAA;IACR,OAAOC,sBAAA,KAAI,EAAAb,aAAA,MAAQ,KAAK,IAAI,CAACK,aAAa,CAACT,MAAM;EACnD;EAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAqCA,MAAMkB,IAAIA,CACRC,GAAW,EAML;IAAA,IALNC,OAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAKI,EAAE;IAEN,MAAM;MACJG,OAAO,GAAG,IAAI,CAACf,aAAa,CAACgB,cAAc,CAACC,gBAAgB,EAAE,CAAC,SAAS,CAAC;MACzEC,cAAc,GAAG,IAAI,CAAClB,aAAa,CAACgB,cAAc,CAACC,gBAAgB,EAAE,CACnE,gBAAgB,CACjB;MACDE,SAAS,GAAG,CAAC,MAAM,CAAC;MACpBC,OAAO,GAAG,IAAI,CAACpB,aAAa,CAACqB,eAAe,CAACC,iBAAiB;IAAE,CACjE,GAAGX,OAAO;IAEX,IAAIY,2BAA2B,GAAG,KAAK;IACvC,MAAMC,OAAO,GAAG,IAAIxC,gBAAgB,CAClC,IAAI,CAACgB,aAAa,EAClB,IAAI,EACJmB,SAAS,EACTC,OAAO,CACR;IACD,IAAIK,KAAK,GAAG,MAAMC,OAAO,CAACC,IAAI,CAAC,CAC7BC,QAAQ,CACNpB,sBAAA,KAAI,EAAAb,aAAA,MAAQ,EACZe,GAAG,EACHK,OAAO,EACPG,cAA8C,EAC9C,IAAI,CAAChB,GAAG,CACT,EACDsB,OAAO,CAACK,2BAA2B,EAAE,CACtC,CAAC;IACF,IAAI,CAACJ,KAAK,EAAE;MACVA,KAAK,GAAG,MAAMC,OAAO,CAACC,IAAI,CAAC,CACzBH,OAAO,CAACK,2BAA2B,EAAE,EACrCN,2BAA2B,GACvBC,OAAO,CAACM,4BAA4B,EAAE,GACtCN,OAAO,CAACO,6BAA6B,EAAE,CAC5C,CAAC;;IAGJ,IAAI;MACF,IAAIN,KAAK,EAAE;QACT,MAAMA,KAAK;;MAEb,OAAO,MAAMD,OAAO,CAACQ,kBAAkB,EAAE;KAC1C,SAAS;MACRR,OAAO,CAACS,OAAO,EAAE;;IAGnB,eAAeL,QAAQA,CACrBrC,MAAkB,EAClBmB,GAAW,EACXwB,QAA4B,EAC5BhB,cAAwD,EACxD7B,OAAe;MAEf,IAAI;QACF,MAAM8C,QAAQ,GAAG,MAAM5C,MAAM,CAAC6C,IAAI,CAAC,eAAe,EAAE;UAClD1B,GAAG;UACHwB,QAAQ;UACR7C,OAAO;UACP6B;SACD,CAAC;QACFK,2BAA2B,GAAG,CAAC,CAACY,QAAQ,CAACE,QAAQ;QACjD,IAAIF,QAAQ,CAACG,SAAS,KAAK,qCAAqC,EAAE;UAChE,OAAO,IAAI;;QAEb,OAAOH,QAAQ,CAACG,SAAS,GACrB,IAAIC,KAAK,CAAC,GAAGJ,QAAQ,CAACG,SAAS,OAAO5B,GAAG,EAAE,CAAC,GAC5C,IAAI;OACT,CAAC,OAAOe,KAAK,EAAE;QACd,IAAI/C,WAAW,CAAC+C,KAAK,CAAC,EAAE;UACtB,OAAOA,KAAK;;QAEd,MAAMA,KAAK;;IAEf;EACF;EAEA;;;;;;;;;;;;;;;;;;;;;;;EAuBA,MAAMe,iBAAiBA,CAAA,EAIf;IAAA,IAHN7B,OAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAGI,EAAE;IAEN,MAAM;MACJO,SAAS,GAAG,CAAC,MAAM,CAAC;MACpBC,OAAO,GAAG,IAAI,CAACpB,aAAa,CAACqB,eAAe,CAACC,iBAAiB;IAAE,CACjE,GAAGX,OAAO;IACX,MAAMa,OAAO,GAAG,IAAIxC,gBAAgB,CAClC,IAAI,CAACgB,aAAa,EAClB,IAAI,EACJmB,SAAS,EACTC,OAAO,CACR;IACD,MAAMK,KAAK,GAAG,MAAMC,OAAO,CAACC,IAAI,CAAC,CAC/BH,OAAO,CAACK,2BAA2B,EAAE,EACrCL,OAAO,CAACO,6BAA6B,EAAE,EACvCP,OAAO,CAACM,4BAA4B,EAAE,CACvC,CAAC;IACF,IAAI;MACF,IAAIL,KAAK,EAAE;QACT,MAAMA,KAAK;;MAEb,OAAO,MAAMD,OAAO,CAACQ,kBAAkB,EAAE;KAC1C,SAAS;MACRR,OAAO,CAACS,OAAO,EAAE;;EAErB;EAEA;;;EAGAQ,OAAOA,CAAA;IACL,OAAOjC,sBAAA,KAAI,EAAAb,aAAA,MAAQ;EACrB;EAEA;;;EAGA+C,gBAAgBA,CAAA;IACd,OAAO,IAAI,CAACrC,MAAM,CAACxB,UAAU,CAAC,CAAC6D,gBAAgB,EAAE;EACnD;EAEA;;;;;;EAMA,MAAMC,cAAcA,CAIlBC,YAA2B,EACZ;IAAA,SAAAC,IAAA,GAAAjC,SAAA,CAAAC,MAAA,EAAZiC,IAAY,OAAAC,KAAA,CAAAF,IAAA,OAAAA,IAAA,WAAAG,IAAA,MAAAA,IAAA,GAAAH,IAAA,EAAAG,IAAA;MAAZF,IAAY,CAAAE,IAAA,QAAApC,SAAA,CAAAoC,IAAA;IAAA;IAEf,OAAO,IAAI,CAAC3C,MAAM,CAACxB,UAAU,CAAC,CAAC8D,cAAc,CAACC,YAAY,EAAE,GAAGE,IAAI,CAAC;EACtE;EAEA;;;;;;EAMA,MAAMG,QAAQA,CAIZL,YAA2B,EACZ;IAAA,SAAAM,KAAA,GAAAtC,SAAA,CAAAC,MAAA,EAAZiC,IAAY,OAAAC,KAAA,CAAAG,KAAA,OAAAA,KAAA,WAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;MAAZL,IAAY,CAAAK,KAAA,QAAAvC,SAAA,CAAAuC,KAAA;IAAA;IAEf,OAAO,IAAI,CAAC9C,MAAM,CAACxB,UAAU,CAAC,CAACoE,QAAQ,CAACL,YAAY,EAAE,GAAGE,IAAI,CAAC;EAChE;EAEA;;;;;;;EAOA,MAAMM,CAACA,CACLC,QAAkB;IAElB,OAAO,IAAI,CAAChD,MAAM,CAACxB,UAAU,CAAC,CAACuE,CAAC,CAACC,QAAQ,CAAC;EAC5C;EAEA;;;;;;;EAOA,MAAMC,EAAEA,CACND,QAAkB;IAElB,OAAO,IAAI,CAAChD,MAAM,CAACxB,UAAU,CAAC,CAACyE,EAAE,CAACD,QAAQ,CAAC;EAC7C;EAEA;;;;;;;;;;;;;;;;;;;;EAoBA,MAAME,KAAKA,CAQTF,QAAkB,EAClBT,YAA2B,EACZ;IAAA,SAAAY,KAAA,GAAA5C,SAAA,CAAAC,MAAA,EAAZiC,IAAY,OAAAC,KAAA,CAAAS,KAAA,OAAAA,KAAA,WAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;MAAZX,IAAY,CAAAW,KAAA,QAAA7C,SAAA,CAAA6C,KAAA;IAAA;IAEf,OAAO,IAAI,CAACpD,MAAM,CAACxB,UAAU,CAAC,CAAC0E,KAAK,CAACF,QAAQ,EAAET,YAAY,EAAE,GAAGE,IAAI,CAAC;EACvE;EAEA;;;;;;;;;;;;;;;;;;;;EAoBA,MAAMY,MAAMA,CAQVL,QAAkB,EAClBT,YAA2B,EACZ;IAAA,SAAAe,KAAA,GAAA/C,SAAA,CAAAC,MAAA,EAAZiC,IAAY,OAAAC,KAAA,CAAAY,KAAA,OAAAA,KAAA,WAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;MAAZd,IAAY,CAAAc,KAAA,QAAAhD,SAAA,CAAAgD,KAAA;IAAA;IAEf,OAAO,IAAI,CAACvD,MAAM,CAACxB,UAAU,CAAC,CAAC6E,MAAM,CAACL,QAAQ,EAAET,YAAY,EAAE,GAAGE,IAAI,CAAC;EACxE;EAEA;;;;;;;;;;EAUA,MAAMe,EAAEA,CAACC,UAAkB;IACzB,OAAO,IAAI,CAACzD,MAAM,CAACxB,UAAU,CAAC,CAACgF,EAAE,CAACC,UAAU,CAAC;EAC/C;EAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAmCA,MAAMC,eAAeA,CACnBV,QAAkB,EACkB;IAAA,IAApC1C,OAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAkC,EAAE;IAEpC,MAAM;MAACoD,eAAe;MAAEC;IAAY,CAAC,GACnCtF,0BAA0B,CAAC0E,QAAQ,CAAC;IACtC,OAAQ,MAAMY,YAAY,CAACC,OAAO,CAChC,IAAI,EACJF,eAAe,EACfrD,OAAO,CACR;EACH;EAEA;;;;;;;;;;;;;;;;;;;;;;EAsBA,MAAMwD,YAAYA,CAChBC,KAAa,EACuB;IAAA,IAApCzD,OAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAkC,EAAE;IAEpC,IAAIwD,KAAK,CAACC,UAAU,CAAC,IAAI,CAAC,EAAE;MAC1BD,KAAK,GAAG,IAAIA,KAAK,EAAE;;IAErB,OAAO,IAAI,CAACL,eAAe,CAAC,SAASK,KAAK,EAAE,EAAEzD,OAAO,CAAC;EACxD;EAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAiCA2D,eAAeA,CAIb1B,YAA2B,EAEZ;IAAA,IADfjC,OAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAuC,EAAE;IAAA,SAAA2D,KAAA,GAAA3D,SAAA,CAAAC,MAAA,EACtCiC,IAAY,OAAAC,KAAA,CAAAwB,KAAA,OAAAA,KAAA,WAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;MAAZ1B,IAAY,CAAA0B,KAAA,QAAA5D,SAAA,CAAA4D,KAAA;IAAA;IAEf,OAAO,IAAI,CAACnE,MAAM,CAACxB,UAAU,CAAC,CAACyF,eAAe,CAC5C1B,YAAY,EACZjC,OAAO,EACP,GAAGmC,IAAI,CACyC;EACpD;EAEA;;;EAGA,MAAM2B,OAAOA,CAAA;IACX,OAAO,IAAI,CAACpE,MAAM,CAACvB,eAAe,CAAC,CAAC2F,OAAO,EAAE;EAC/C;EAEA;;;;;;;EAOA,MAAMC,UAAUA,CACdC,IAAY,EAIN;IAAA,IAHNhE,OAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAGI,EAAE;IAEN,OAAO,IAAI,CAACP,MAAM,CAACvB,eAAe,CAAC,CAAC4F,UAAU,CAACC,IAAI,EAAEhE,OAAO,CAAC;EAC/D;EAEA;;;;;;;;;;EAUAiE,IAAIA,CAAA;IACF,OAAO,IAAI,CAACC,KAAK,IAAI,EAAE;EACzB;EAEA;;;EAGAnE,GAAGA,CAAA;IACD,OAAOF,sBAAA,KAAI,EAAAhB,UAAA,MAAK;EAClB;EAEA;;;EAGAsF,WAAWA,CAAA;IACT,OAAO,IAAI,CAAC9E,aAAa,CAAC+E,UAAU,CAACD,WAAW,CAAC,IAAI,CAAC5E,GAAG,CAAC,IAAI,IAAI;EACpE;EAEA;;;EAGA8E,WAAWA,CAAA;IACT,OAAO,IAAI,CAAChF,aAAa,CAAC+E,UAAU,CAACC,WAAW,CAAC,IAAI,CAAC9E,GAAG,CAAC;EAC5D;EAEA;;;EAGA+E,UAAUA,CAAA;IACR,OAAOzE,sBAAA,KAAI,EAAAd,eAAA,MAAU;EACvB;EAEA;;;;;;;EAOA,MAAMwF,YAAYA,CAChBvE,OAAiC;IAEjC,IAAI;MAAC8D,OAAO,GAAG,EAAE;MAAEU;IAAI,CAAC,GAAGxE,OAAO;IAClC,MAAM;MAACyE;IAAI,CAAC,GAAGzE,OAAO;IACtB,IAAI,CAAC,CAAC,CAACA,OAAO,CAACD,GAAG,GAAG,CAAC,CAAC,CAAC0E,IAAI,GAAG,CAAC,CAAC,CAACX,OAAO,KAAK,CAAC,EAAE;MAC/C,MAAM,IAAIlC,KAAK,CACb,+DAA+D,CAChE;;IAGH,IAAI6C,IAAI,EAAE;MACR,IAAIC,EAAE;MACN,IAAI;QACFA,EAAE,GAAG,CAAC,MAAM,MAAM,CAAC,IAAI,CAAC,EAAEC,QAAQ;OACnC,CAAC,OAAO7D,KAAK,EAAE;QACd,IAAIA,KAAK,YAAY8D,SAAS,EAAE;UAC9B,MAAM,IAAIhD,KAAK,CACb,uDAAuD,CACxD;;QAEH,MAAMd,KAAK;;MAEbgD,OAAO,GAAG,MAAMY,EAAE,CAACG,QAAQ,CAACJ,IAAI,EAAE,MAAM,CAAC;MACzCX,OAAO,IAAI,iBAAiBW,IAAI,CAACK,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,EAAE;;IAGvDN,IAAI,GAAGA,IAAI,aAAJA,IAAI,cAAJA,IAAI,GAAI,iBAAiB;IAEhC,OAAO,IAAI,CAAC9E,MAAM,CAACxB,UAAU,CAAC,CAAC6G,cAAc,CAC3C,MAAM,IAAI,CAACrF,MAAM,CAACvB,eAAe,CAAC,CAAC6D,cAAc,CAC/C,OAAAgD,IAAA,EAAAC,KAAA,KAA4D;MAAA,IAArD;QAACC;MAAqB,CAAC,GAAAF,IAAA;MAAA,IAAE;QAACjF,GAAG;QAAEoF,EAAE;QAAEX,IAAI;QAAEV;MAAO,CAAC,GAAAmB,KAAA;MACtD,MAAMG,OAAO,GAAGF,qBAAqB,EAAQ;MAC7C,MAAMG,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;MAC/CF,MAAM,CAACb,IAAI,GAAGA,IAAI;MAClBa,MAAM,CAACG,IAAI,GAAG1B,OAAO;MACrB,IAAI/D,GAAG,EAAE;QACPsF,MAAM,CAACI,GAAG,GAAG1F,GAAG;QAChBsF,MAAM,CAACK,gBAAgB,CACrB,MAAM,EACN,MAAK;UACH,OAAON,OAAO,CAACO,OAAO,EAAE;QAC1B,CAAC,EACD;UAACC,IAAI,EAAE;QAAI,CAAC,CACb;QACDP,MAAM,CAACK,gBAAgB,CACrB,OAAO,EACPG,KAAK,IAAG;;UACNT,OAAO,CAACU,MAAM,CACZ,IAAIlE,KAAK,CAAC,CAAAmE,EAAA,GAAAF,KAAK,CAACG,OAAO,cAAAD,EAAA,cAAAA,EAAA,GAAI,uBAAuB,CAAC,CACpD;QACH,CAAC,EACD;UAACH,IAAI,EAAE;QAAI,CAAC,CACb;OACF,MAAM;QACLR,OAAO,CAACO,OAAO,EAAE;;MAEnB,IAAIR,EAAE,EAAE;QACNE,MAAM,CAACF,EAAE,GAAGA,EAAE;;MAEhBG,QAAQ,CAACW,IAAI,CAACC,WAAW,CAACb,MAAM,CAAC;MACjC,MAAMD,OAAO;MACb,OAAOC,MAAM;IACf,CAAC,EACDjH,OAAO,CAAC+H,MAAM,CAACC,OAAO,IAAG;MACvB,OAAOA,OAAO,CAACC,aAAa;IAC9B,CAAC,CAAC,EACF;MAAC,GAAGrG,OAAO;MAAEwE,IAAI;MAAEV;IAAO,CAAC,CAC5B,CACF;EACH;EAeA,MAAMwC,WAAWA,CACftG,OAAgC;IAEhC,IAAI;MAAC8D,OAAO,GAAG;IAAE,CAAC,GAAG9D,OAAO;IAC5B,MAAM;MAACyE;IAAI,CAAC,GAAGzE,OAAO;IACtB,IAAI,CAAC,CAAC,CAACA,OAAO,CAACD,GAAG,GAAG,CAAC,CAAC,CAAC0E,IAAI,GAAG,CAAC,CAAC,CAACX,OAAO,KAAK,CAAC,EAAE;MAC/C,MAAM,IAAIlC,KAAK,CACb,+DAA+D,CAChE;;IAGH,IAAI6C,IAAI,EAAE;MACR,IAAIC,EAAgC;MACpC,IAAI;QACFA,EAAE,GAAG,CAAC,MAAMpG,QAAQ,EAAE,EAAEqG,QAAQ;OACjC,CAAC,OAAO7D,KAAK,EAAE;QACd,IAAIA,KAAK,YAAY8D,SAAS,EAAE;UAC9B,MAAM,IAAIhD,KAAK,CACb,uDAAuD,CACxD;;QAEH,MAAMd,KAAK;;MAGbgD,OAAO,GAAG,MAAMY,EAAE,CAACG,QAAQ,CAACJ,IAAI,EAAE,MAAM,CAAC;MACzCX,OAAO,IAAI,gBAAgB,GAAGW,IAAI,CAACK,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,GAAG,IAAI;MAC5D9E,OAAO,CAAC8D,OAAO,GAAGA,OAAO;;IAG3B,OAAO,IAAI,CAACpE,MAAM,CAACxB,UAAU,CAAC,CAAC6G,cAAc,CAC3C,MAAM,IAAI,CAACrF,MAAM,CAACvB,eAAe,CAAC,CAAC6D,cAAc,CAC/C,OAAAuE,KAAA,EAAAC,KAAA,KAAkD;MAAA,IAA3C;QAACtB;MAAqB,CAAC,GAAAqB,KAAA;MAAA,IAAE;QAACxG,GAAG;QAAE+D;MAAO,CAAC,GAAA0C,KAAA;MAC5C,MAAMpB,OAAO,GAAGF,qBAAqB,EAAQ;MAC7C,IAAIuB,OAA2C;MAC/C,IAAI,CAAC1G,GAAG,EAAE;QACR0G,OAAO,GAAGnB,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC;QACzCkB,OAAO,CAACP,WAAW,CAACZ,QAAQ,CAACoB,cAAc,CAAC5C,OAAQ,CAAC,CAAC;OACvD,MAAM;QACL,MAAM6C,IAAI,GAAGrB,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;QAC3CoB,IAAI,CAACC,GAAG,GAAG,YAAY;QACvBD,IAAI,CAACE,IAAI,GAAG9G,GAAG;QACf0G,OAAO,GAAGE,IAAI;;MAEhBF,OAAO,CAACf,gBAAgB,CACtB,MAAM,EACN,MAAK;QACHN,OAAO,CAACO,OAAO,EAAE;MACnB,CAAC,EACD;QAACC,IAAI,EAAE;MAAI,CAAC,CACb;MACDa,OAAO,CAACf,gBAAgB,CACtB,OAAO,EACPG,KAAK,IAAG;;QACNT,OAAO,CAACU,MAAM,CACZ,IAAIlE,KAAK,CACP,CAAAmE,EAAA,GAACF,KAAoB,CAACG,OAAO,cAAAD,EAAA,cAAAA,EAAA,GAAI,sBAAsB,CACxD,CACF;MACH,CAAC,EACD;QAACH,IAAI,EAAE;MAAI,CAAC,CACb;MACDN,QAAQ,CAACW,IAAI,CAACC,WAAW,CAACO,OAAO,CAAC;MAClC,MAAMrB,OAAO;MACb,OAAOqB,OAAO;IAChB,CAAC,EACDrI,OAAO,CAAC+H,MAAM,CAACC,OAAO,IAAG;MACvB,OAAOA,OAAO,CAACC,aAAa;IAC9B,CAAC,CAAC,EACFrG,OAAO,CACR,CACF;EACH;EAEA;;;;;;;;;;;;;;;;;;EAkBA,MAAM8G,KAAKA,CACTpE,QAAgB,EAKV;IAAA,IAJN1C,OAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAII,EAAE;IAEN,OAAO,IAAI,CAACP,MAAM,CAACvB,eAAe,CAAC,CAAC2I,KAAK,CAACpE,QAAQ,EAAE1C,OAAO,CAAC;EAC9D;EAEA;;;;;;EAMA,MAAM+G,KAAKA,CAACrE,QAAgB;IAC1B,OAAO,IAAI,CAAChD,MAAM,CAACvB,eAAe,CAAC,CAAC4I,KAAK,CAACrE,QAAQ,CAAC;EACrD;EAEA;;;;;;;EAOA,MAAMsE,KAAKA,CAACtE,QAAgB;IAC1B,OAAO,IAAI,CAAChD,MAAM,CAACvB,eAAe,CAAC,CAAC6I,KAAK,CAACtE,QAAQ,CAAC;EACrD;EAEA;;;;;;;;;;;;;;;;;;EAkBAuE,MAAMA,CAACvE,QAAgB,EAAqB;IAAA,SAAAwE,KAAA,GAAAjH,SAAA,CAAAC,MAAA,EAAhBiH,MAAgB,OAAA/E,KAAA,CAAA8E,KAAA,OAAAA,KAAA,WAAAE,KAAA,MAAAA,KAAA,GAAAF,KAAA,EAAAE,KAAA;MAAhBD,MAAgB,CAAAC,KAAA,QAAAnH,SAAA,CAAAmH,KAAA;IAAA;IAC1C,OAAO,IAAI,CAAC1H,MAAM,CAACvB,eAAe,CAAC,CAAC8I,MAAM,CAACvE,QAAQ,EAAE,GAAGyE,MAAM,CAAC;EACjE;EAEA;;;;;;EAMA,MAAME,GAAGA,CAAC3E,QAAgB;IACxB,OAAO,IAAI,CAAChD,MAAM,CAACvB,eAAe,CAAC,CAACkJ,GAAG,CAAC3E,QAAQ,CAAC;EACnD;EAEA;;;;;;;;;;;;;;;;;;;;;EAqBA,MAAM8B,IAAIA,CACR9B,QAAgB,EAChB8C,IAAY,EACZxF,OAAyB;IAEzB,OAAO,IAAI,CAACN,MAAM,CAACvB,eAAe,CAAC,CAACqG,IAAI,CAAC9B,QAAQ,EAAE8C,IAAI,EAAExF,OAAO,CAAC;EACnE;EAEA;;;;;;;;;;;;;;;;;;;;EAoBAsH,cAAcA,CAACC,YAAoB;IACjC,OAAO,IAAIxG,OAAO,CAAC4E,OAAO,IAAG;MAC3B6B,UAAU,CAAC7B,OAAO,EAAE4B,YAAY,CAAC;IACnC,CAAC,CAAC;EACJ;EAEA;;;EAGA,MAAME,KAAKA,CAAA;IACT,OAAO,IAAI,CAAC/H,MAAM,CAACvB,eAAe,CAAC,CAACsJ,KAAK,EAAE;EAC7C;EAEA;;;EAGAC,2BAA2BA,CAAA;IACzB,IAAI,IAAI,CAAC9H,UAAU,EAAE,EAAE;MACrB,OAAO,IAAI,CAACP,aAAa,CAACqI,2BAA2B,CAAC7H,sBAAA,KAAI,EAAAb,aAAA,MAAQ,CAAC;;IAErE,MAAMmF,WAAW,GAAG,IAAI,CAACA,WAAW,EAAE;IACtCrG,MAAM,CAACqG,WAAW,KAAK,IAAI,CAAC;IAC5B,OAAOA,WAAW,CAACuD,2BAA2B,EAAE;EAClD;EAEA;;;;;;;;;;;;;;;;;;;;;;;EAuBAC,mBAAmBA,CAAA,EACe;IAAA,IAAhC3H,OAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAA8B,EAAE;IAEhC,OAAO,IAAI,CAACyH,2BAA2B,EAAE,CAACC,mBAAmB,CAAC3H,OAAO,CAAC;EACxE;EAEA;;;EAGA4H,UAAUA,CAACC,YAAiC;IAC1C,IAAI,CAAC3D,KAAK,GAAG2D,YAAY,CAAC5D,IAAI;IAC9B3E,sBAAA,KAAI,EAAAT,UAAA,EAAQ,GAAGgJ,YAAY,CAAC9H,GAAG,GAAG8H,YAAY,CAACC,WAAW,IAAI,EAAE,EAAE;EACpE;EAEA;;;EAGAC,wBAAwBA,CAAChI,GAAW;IAClCT,sBAAA,KAAI,EAAAT,UAAA,EAAQkB,GAAG;EACjB;EAEA;;;EAGAiI,iBAAiBA,CAACtG,QAAgB,EAAEuC,IAAY;IAC9C,IAAIA,IAAI,KAAK,MAAM,EAAE;MACnB,IAAI,CAAChF,SAAS,GAAGyC,QAAQ;MACzB,IAAI,CAACvC,gBAAgB,CAAC8I,KAAK,EAAE;;IAE/B,IAAI,CAAC9I,gBAAgB,CAAC+I,GAAG,CAACjE,IAAI,CAAC;EACjC;EAEA;;;EAGAkE,iBAAiBA,CAAA;IACf,IAAI,CAAChJ,gBAAgB,CAAC+I,GAAG,CAAC,kBAAkB,CAAC;IAC7C,IAAI,CAAC/I,gBAAgB,CAAC+I,GAAG,CAAC,MAAM,CAAC;EACnC;EAEA;;;EAGAE,iBAAiBA,CAAA;IACf,IAAI,CAAClJ,kBAAkB,GAAG,IAAI;EAChC;EAEA;;;EAGAmJ,OAAOA,CAAA;IACL/I,sBAAA,KAAI,EAAAP,eAAA,EAAa,IAAI;IACrB,IAAI,CAACW,MAAM,CAACxB,UAAU,CAAC,CAACmK,OAAO,EAAE;IACjC,IAAI,CAAC3I,MAAM,CAACvB,eAAe,CAAC,CAACkK,OAAO,EAAE;EACxC"},"metadata":{},"sourceType":"module","externalDependencies":[]}