{"ast":null,"code":"/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\nvar _ExecutionContext_instances, _ExecutionContext_puppeteerUtil, _ExecutionContext_installGlobalBinding, _ExecutionContext_evaluate;\nimport { AsyncIterableUtil } from '../util/AsyncIterableUtil.js';\nimport { stringifyFunction } from '../util/Function.js';\nimport { ARIAQueryHandler } from './AriaQueryHandler.js';\nimport { Binding } from './Binding.js';\nimport { CDPElementHandle } from './ElementHandle.js';\nimport { CDPJSHandle } from './JSHandle.js';\nimport { LazyArg } from './LazyArg.js';\nimport { scriptInjector } from './ScriptInjector.js';\nimport { createJSHandle, getExceptionMessage, isString, valueFromRemoteObject } from './util.js';\n/**\n * @public\n */\nexport const EVALUATION_SCRIPT_URL = 'pptr://__puppeteer_evaluation_script__';\nconst SOURCE_URL_REGEX = /^[\\040\\t]*\\/\\/[@#] sourceURL=\\s*(\\S*?)\\s*$/m;\n/**\n * Represents a context for JavaScript execution.\n *\n * @example\n * A {@link Page} can have several execution contexts:\n *\n * - Each {@link Frame} of a {@link Page | page} has a \"default\" execution\n *   context that is always created after frame is attached to DOM. This context\n *   is returned by the {@link Frame.executionContext} method.\n * - Each {@link https://developer.chrome.com/extensions | Chrome extensions}\n *   creates additional execution contexts to isolate their code.\n *\n * @remarks\n * By definition, each context is isolated from one another, however they are\n * all able to manipulate non-JavaScript resources (such as DOM).\n *\n * @remarks\n * Besides pages, execution contexts can be found in\n * {@link WebWorker | workers}.\n *\n * @internal\n */\nexport class ExecutionContext {\n  constructor(client, contextPayload, world) {\n    _ExecutionContext_instances.add(this);\n    _ExecutionContext_puppeteerUtil.set(this, void 0);\n    this._client = client;\n    this._world = world;\n    this._contextId = contextPayload.id;\n    if (contextPayload.name) {\n      this._contextName = contextPayload.name;\n    }\n  }\n  get puppeteerUtil() {\n    scriptInjector.inject(script => {\n      if (__classPrivateFieldGet(this, _ExecutionContext_puppeteerUtil, \"f\")) {\n        __classPrivateFieldGet(this, _ExecutionContext_puppeteerUtil, \"f\").then(handle => {\n          handle.dispose();\n        });\n      }\n      __classPrivateFieldSet(this, _ExecutionContext_puppeteerUtil, Promise.all([__classPrivateFieldGet(this, _ExecutionContext_instances, \"m\", _ExecutionContext_installGlobalBinding).call(this, new Binding('__ariaQuerySelector', ARIAQueryHandler.queryOne)), __classPrivateFieldGet(this, _ExecutionContext_instances, \"m\", _ExecutionContext_installGlobalBinding).call(this, new Binding('__ariaQuerySelectorAll', async (element, selector) => {\n        const results = ARIAQueryHandler.queryAll(element, selector);\n        return element.executionContext().evaluateHandle(function () {\n          for (var _len = arguments.length, elements = new Array(_len), _key = 0; _key < _len; _key++) {\n            elements[_key] = arguments[_key];\n          }\n          return elements;\n        }, ...(await AsyncIterableUtil.collect(results)));\n      }))]).then(() => {\n        return this.evaluateHandle(script);\n      }), \"f\");\n    }, !__classPrivateFieldGet(this, _ExecutionContext_puppeteerUtil, \"f\"));\n    return __classPrivateFieldGet(this, _ExecutionContext_puppeteerUtil, \"f\");\n  }\n  /**\n   * Evaluates the given function.\n   *\n   * @example\n   *\n   * ```ts\n   * const executionContext = await page.mainFrame().executionContext();\n   * const result = await executionContext.evaluate(() => Promise.resolve(8 * 7))* ;\n   * console.log(result); // prints \"56\"\n   * ```\n   *\n   * @example\n   * A string can also be passed in instead of a function:\n   *\n   * ```ts\n   * console.log(await executionContext.evaluate('1 + 2')); // prints \"3\"\n   * ```\n   *\n   * @example\n   * Handles can also be passed as `args`. They resolve to their referenced object:\n   *\n   * ```ts\n   * const oneHandle = await executionContext.evaluateHandle(() => 1);\n   * const twoHandle = await executionContext.evaluateHandle(() => 2);\n   * const result = await executionContext.evaluate(\n   *   (a, b) => a + b,\n   *   oneHandle,\n   *   twoHandle\n   * );\n   * await oneHandle.dispose();\n   * await twoHandle.dispose();\n   * console.log(result); // prints '3'.\n   * ```\n   *\n   * @param pageFunction - The function to evaluate.\n   * @param args - Additional arguments to pass into the function.\n   * @returns The result of evaluating the function. If the result is an object,\n   * a vanilla object containing the serializable properties of the result is\n   * returned.\n   */\n  async evaluate(pageFunction) {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n    return await __classPrivateFieldGet(this, _ExecutionContext_instances, \"m\", _ExecutionContext_evaluate).call(this, true, pageFunction, ...args);\n  }\n  /**\n   * Evaluates the given function.\n   *\n   * Unlike {@link ExecutionContext.evaluate | evaluate}, this method returns a\n   * handle to the result of the function.\n   *\n   * This method may be better suited if the object cannot be serialized (e.g.\n   * `Map`) and requires further manipulation.\n   *\n   * @example\n   *\n   * ```ts\n   * const context = await page.mainFrame().executionContext();\n   * const handle: JSHandle<typeof globalThis> = await context.evaluateHandle(\n   *   () => Promise.resolve(self)\n   * );\n   * ```\n   *\n   * @example\n   * A string can also be passed in instead of a function.\n   *\n   * ```ts\n   * const handle: JSHandle<number> = await context.evaluateHandle('1 + 2');\n   * ```\n   *\n   * @example\n   * Handles can also be passed as `args`. They resolve to their referenced object:\n   *\n   * ```ts\n   * const bodyHandle: ElementHandle<HTMLBodyElement> =\n   *   await context.evaluateHandle(() => {\n   *     return document.body;\n   *   });\n   * const stringHandle: JSHandle<string> = await context.evaluateHandle(\n   *   body => body.innerHTML,\n   *   body\n   * );\n   * console.log(await stringHandle.jsonValue()); // prints body's innerHTML\n   * // Always dispose your garbage! :)\n   * await bodyHandle.dispose();\n   * await stringHandle.dispose();\n   * ```\n   *\n   * @param pageFunction - The function to evaluate.\n   * @param args - Additional arguments to pass into the function.\n   * @returns A {@link JSHandle | handle} to the result of evaluating the\n   * function. If the result is a `Node`, then this will return an\n   * {@link ElementHandle | element handle}.\n   */\n  async evaluateHandle(pageFunction) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n    return __classPrivateFieldGet(this, _ExecutionContext_instances, \"m\", _ExecutionContext_evaluate).call(this, false, pageFunction, ...args);\n  }\n}\n_ExecutionContext_puppeteerUtil = new WeakMap(), _ExecutionContext_instances = new WeakSet(), _ExecutionContext_installGlobalBinding = async function _ExecutionContext_installGlobalBinding(binding) {\n  try {\n    if (this._world) {\n      this._world._bindings.set(binding.name, binding);\n      await this._world._addBindingToContext(this, binding.name);\n    }\n  } catch {\n    // If the binding cannot be added, then either the browser doesn't support\n    // bindings (e.g. Firefox) or the context is broken. Either breakage is\n    // okay, so we ignore the error.\n  }\n}, _ExecutionContext_evaluate = async function _ExecutionContext_evaluate(returnByValue, pageFunction) {\n  const suffix = `//# sourceURL=${EVALUATION_SCRIPT_URL}`;\n  if (isString(pageFunction)) {\n    const contextId = this._contextId;\n    const expression = pageFunction;\n    const expressionWithSourceUrl = SOURCE_URL_REGEX.test(expression) ? expression : expression + '\\n' + suffix;\n    const {\n      exceptionDetails,\n      result: remoteObject\n    } = await this._client.send('Runtime.evaluate', {\n      expression: expressionWithSourceUrl,\n      contextId,\n      returnByValue,\n      awaitPromise: true,\n      userGesture: true\n    }).catch(rewriteError);\n    if (exceptionDetails) {\n      throw new Error('Evaluation failed: ' + getExceptionMessage(exceptionDetails));\n    }\n    return returnByValue ? valueFromRemoteObject(remoteObject) : createJSHandle(this, remoteObject);\n  }\n  let callFunctionOnPromise;\n  try {\n    for (var _len4 = arguments.length, args = new Array(_len4 > 2 ? _len4 - 2 : 0), _key4 = 2; _key4 < _len4; _key4++) {\n      args[_key4 - 2] = arguments[_key4];\n    }\n    callFunctionOnPromise = this._client.send('Runtime.callFunctionOn', {\n      functionDeclaration: `${stringifyFunction(pageFunction)}\\n${suffix}\\n`,\n      executionContextId: this._contextId,\n      arguments: await Promise.all(args.map(convertArgument.bind(this))),\n      returnByValue,\n      awaitPromise: true,\n      userGesture: true\n    });\n  } catch (error) {\n    if (error instanceof TypeError && error.message.startsWith('Converting circular structure to JSON')) {\n      error.message += ' Recursive objects are not allowed.';\n    }\n    throw error;\n  }\n  const {\n    exceptionDetails,\n    result: remoteObject\n  } = await callFunctionOnPromise.catch(rewriteError);\n  if (exceptionDetails) {\n    throw new Error('Evaluation failed: ' + getExceptionMessage(exceptionDetails));\n  }\n  return returnByValue ? valueFromRemoteObject(remoteObject) : createJSHandle(this, remoteObject);\n  async function convertArgument(arg) {\n    if (arg instanceof LazyArg) {\n      arg = await arg.get(this);\n    }\n    if (typeof arg === 'bigint') {\n      // eslint-disable-line valid-typeof\n      return {\n        unserializableValue: `${arg.toString()}n`\n      };\n    }\n    if (Object.is(arg, -0)) {\n      return {\n        unserializableValue: '-0'\n      };\n    }\n    if (Object.is(arg, Infinity)) {\n      return {\n        unserializableValue: 'Infinity'\n      };\n    }\n    if (Object.is(arg, -Infinity)) {\n      return {\n        unserializableValue: '-Infinity'\n      };\n    }\n    if (Object.is(arg, NaN)) {\n      return {\n        unserializableValue: 'NaN'\n      };\n    }\n    const objectHandle = arg && (arg instanceof CDPJSHandle || arg instanceof CDPElementHandle) ? arg : null;\n    if (objectHandle) {\n      if (objectHandle.executionContext() !== this) {\n        throw new Error('JSHandles can be evaluated only in the context they were created!');\n      }\n      if (objectHandle.disposed) {\n        throw new Error('JSHandle is disposed!');\n      }\n      if (objectHandle.remoteObject().unserializableValue) {\n        return {\n          unserializableValue: objectHandle.remoteObject().unserializableValue\n        };\n      }\n      if (!objectHandle.remoteObject().objectId) {\n        return {\n          value: objectHandle.remoteObject().value\n        };\n      }\n      return {\n        objectId: objectHandle.remoteObject().objectId\n      };\n    }\n    return {\n      value: arg\n    };\n  }\n};\nconst rewriteError = error => {\n  if (error.message.includes('Object reference chain is too long')) {\n    return {\n      result: {\n        type: 'undefined'\n      }\n    };\n  }\n  if (error.message.includes(\"Object couldn't be returned by value\")) {\n    return {\n      result: {\n        type: 'undefined'\n      }\n    };\n  }\n  if (error.message.endsWith('Cannot find context with specified id') || error.message.endsWith('Inspected target navigated or closed')) {\n    throw new Error('Execution context was destroyed, most likely because of a navigation.');\n  }\n  throw error;\n};","map":{"version":3,"names":["AsyncIterableUtil","stringifyFunction","ARIAQueryHandler","Binding","CDPElementHandle","CDPJSHandle","LazyArg","scriptInjector","createJSHandle","getExceptionMessage","isString","valueFromRemoteObject","EVALUATION_SCRIPT_URL","SOURCE_URL_REGEX","ExecutionContext","constructor","client","contextPayload","world","_ExecutionContext_puppeteerUtil","set","_client","_world","_contextId","id","name","_contextName","puppeteerUtil","inject","script","__classPrivateFieldGet","then","handle","dispose","__classPrivateFieldSet","Promise","all","_ExecutionContext_instances","_ExecutionContext_installGlobalBinding","call","queryOne","element","selector","results","queryAll","executionContext","evaluateHandle","_len","arguments","length","elements","Array","_key","collect","evaluate","pageFunction","_len2","args","_key2","_ExecutionContext_evaluate","_len3","_key3","binding","_bindings","_addBindingToContext","returnByValue","suffix","contextId","expression","expressionWithSourceUrl","test","exceptionDetails","result","remoteObject","send","awaitPromise","userGesture","catch","rewriteError","Error","callFunctionOnPromise","_len4","_key4","functionDeclaration","executionContextId","map","convertArgument","bind","error","TypeError","message","startsWith","arg","get","unserializableValue","toString","Object","is","Infinity","NaN","objectHandle","disposed","objectId","value","includes","type","endsWith"],"sources":["../../../../src/common/ExecutionContext.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}