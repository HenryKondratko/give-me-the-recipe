{"ast":null,"code":"/**\n * Copyright 2019 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\nvar __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _CDPElementHandle_instances, _CDPElementHandle_frame, _CDPElementHandle_frameManager_get, _CDPElementHandle_page_get, _CDPElementHandle_scrollIntoViewIfNeeded, _CDPElementHandle_getOOPIFOffsets, _CDPElementHandle_getBoxModel, _CDPElementHandle_fromProtocolQuad, _CDPElementHandle_intersectQuadWithViewport;\nimport { ElementHandle } from '../api/ElementHandle.js';\nimport { assert } from '../util/assert.js';\nimport { AsyncIterableUtil } from '../util/AsyncIterableUtil.js';\nimport { getQueryHandlerAndSelector } from './GetQueryHandler.js';\nimport { CDPJSHandle } from './JSHandle.js';\nimport { debugError, isString } from './util.js';\nconst applyOffsetsToQuad = (quad, offsetX, offsetY) => {\n  return quad.map(part => {\n    return {\n      x: part.x + offsetX,\n      y: part.y + offsetY\n    };\n  });\n};\n/**\n * The CDPElementHandle extends ElementHandle now to keep compatibility\n * with `instanceof` because of that we need to have methods for\n * CDPJSHandle to in this implementation as well.\n *\n * @internal\n */\nexport class CDPElementHandle extends ElementHandle {\n  constructor(context, remoteObject, frame) {\n    super(new CDPJSHandle(context, remoteObject));\n    _CDPElementHandle_instances.add(this);\n    _CDPElementHandle_frame.set(this, void 0);\n    __classPrivateFieldSet(this, _CDPElementHandle_frame, frame, \"f\");\n  }\n  /**\n   * @internal\n   */\n  executionContext() {\n    return this.handle.executionContext();\n  }\n  /**\n   * @internal\n   */\n  get client() {\n    return this.handle.client;\n  }\n  remoteObject() {\n    return this.handle.remoteObject();\n  }\n  get frame() {\n    return __classPrivateFieldGet(this, _CDPElementHandle_frame, \"f\");\n  }\n  async $(selector) {\n    const {\n      updatedSelector,\n      QueryHandler\n    } = getQueryHandlerAndSelector(selector);\n    return await QueryHandler.queryOne(this, updatedSelector);\n  }\n  async $$(selector) {\n    const {\n      updatedSelector,\n      QueryHandler\n    } = getQueryHandlerAndSelector(selector);\n    return AsyncIterableUtil.collect(QueryHandler.queryAll(this, updatedSelector));\n  }\n  async $eval(selector, pageFunction) {\n    const elementHandle = await this.$(selector);\n    if (!elementHandle) {\n      throw new Error(`Error: failed to find element matching selector \"${selector}\"`);\n    }\n    for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n    const result = await elementHandle.evaluate(pageFunction, ...args);\n    await elementHandle.dispose();\n    return result;\n  }\n  async $$eval(selector, pageFunction) {\n    const results = await this.$$(selector);\n    const elements = await this.evaluateHandle(function (_) {\n      for (var _len3 = arguments.length, elements = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n        elements[_key3 - 1] = arguments[_key3];\n      }\n      return elements;\n    }, ...results);\n    for (var _len2 = arguments.length, args = new Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n      args[_key2 - 2] = arguments[_key2];\n    }\n    const [result] = await Promise.all([elements.evaluate(pageFunction, ...args), ...results.map(results => {\n      return results.dispose();\n    })]);\n    await elements.dispose();\n    return result;\n  }\n  async $x(expression) {\n    if (expression.startsWith('//')) {\n      expression = `.${expression}`;\n    }\n    return this.$$(`xpath/${expression}`);\n  }\n  async waitForSelector(selector) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const {\n      updatedSelector,\n      QueryHandler\n    } = getQueryHandlerAndSelector(selector);\n    return await QueryHandler.waitFor(this, updatedSelector, options);\n  }\n  async waitForXPath(xpath) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (xpath.startsWith('//')) {\n      xpath = `.${xpath}`;\n    }\n    return this.waitForSelector(`xpath/${xpath}`, options);\n  }\n  async toElement(tagName) {\n    const isMatchingTagName = await this.evaluate((node, tagName) => {\n      return node.nodeName === tagName.toUpperCase();\n    }, tagName);\n    if (!isMatchingTagName) {\n      throw new Error(`Element is not a(n) \\`${tagName}\\` element`);\n    }\n    return this;\n  }\n  async contentFrame() {\n    const nodeInfo = await this.client.send('DOM.describeNode', {\n      objectId: this.remoteObject().objectId\n    });\n    if (typeof nodeInfo.node.frameId !== 'string') {\n      return null;\n    }\n    return __classPrivateFieldGet(this, _CDPElementHandle_instances, \"a\", _CDPElementHandle_frameManager_get).frame(nodeInfo.node.frameId);\n  }\n  async clickablePoint(offset) {\n    const [result, layoutMetrics] = await Promise.all([this.client.send('DOM.getContentQuads', {\n      objectId: this.remoteObject().objectId\n    }).catch(debugError), __classPrivateFieldGet(this, _CDPElementHandle_instances, \"a\", _CDPElementHandle_page_get)._client().send('Page.getLayoutMetrics')]);\n    if (!result || !result.quads.length) {\n      throw new Error('Node is either not clickable or not an HTMLElement');\n    }\n    // Filter out quads that have too small area to click into.\n    // Fallback to `layoutViewport` in case of using Firefox.\n    const {\n      clientWidth,\n      clientHeight\n    } = layoutMetrics.cssLayoutViewport || layoutMetrics.layoutViewport;\n    const {\n      offsetX,\n      offsetY\n    } = await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"m\", _CDPElementHandle_getOOPIFOffsets).call(this, __classPrivateFieldGet(this, _CDPElementHandle_frame, \"f\"));\n    const quads = result.quads.map(quad => {\n      return __classPrivateFieldGet(this, _CDPElementHandle_instances, \"m\", _CDPElementHandle_fromProtocolQuad).call(this, quad);\n    }).map(quad => {\n      return applyOffsetsToQuad(quad, offsetX, offsetY);\n    }).map(quad => {\n      return __classPrivateFieldGet(this, _CDPElementHandle_instances, \"m\", _CDPElementHandle_intersectQuadWithViewport).call(this, quad, clientWidth, clientHeight);\n    }).filter(quad => {\n      return computeQuadArea(quad) > 1;\n    });\n    if (!quads.length) {\n      throw new Error('Node is either not clickable or not an HTMLElement');\n    }\n    const quad = quads[0];\n    if (offset) {\n      // Return the point of the first quad identified by offset.\n      let minX = Number.MAX_SAFE_INTEGER;\n      let minY = Number.MAX_SAFE_INTEGER;\n      for (const point of quad) {\n        if (point.x < minX) {\n          minX = point.x;\n        }\n        if (point.y < minY) {\n          minY = point.y;\n        }\n      }\n      if (minX !== Number.MAX_SAFE_INTEGER && minY !== Number.MAX_SAFE_INTEGER) {\n        return {\n          x: minX + offset.x,\n          y: minY + offset.y\n        };\n      }\n    }\n    // Return the middle point of the first quad.\n    let x = 0;\n    let y = 0;\n    for (const point of quad) {\n      x += point.x;\n      y += point.y;\n    }\n    return {\n      x: x / 4,\n      y: y / 4\n    };\n  }\n  /**\n   * This method scrolls element into view if needed, and then\n   * uses {@link Page.mouse} to hover over the center of the element.\n   * If the element is detached from DOM, the method throws an error.\n   */\n  async hover() {\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"m\", _CDPElementHandle_scrollIntoViewIfNeeded).call(this);\n    const {\n      x,\n      y\n    } = await this.clickablePoint();\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"a\", _CDPElementHandle_page_get).mouse.move(x, y);\n  }\n  /**\n   * This method scrolls element into view if needed, and then\n   * uses {@link Page.mouse} to click in the center of the element.\n   * If the element is detached from DOM, the method throws an error.\n   */\n  async click() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"m\", _CDPElementHandle_scrollIntoViewIfNeeded).call(this);\n    const {\n      x,\n      y\n    } = await this.clickablePoint(options.offset);\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"a\", _CDPElementHandle_page_get).mouse.click(x, y, options);\n  }\n  /**\n   * This method creates and captures a dragevent from the element.\n   */\n  async drag(target) {\n    assert(__classPrivateFieldGet(this, _CDPElementHandle_instances, \"a\", _CDPElementHandle_page_get).isDragInterceptionEnabled(), 'Drag Interception is not enabled!');\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"m\", _CDPElementHandle_scrollIntoViewIfNeeded).call(this);\n    const start = await this.clickablePoint();\n    return await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"a\", _CDPElementHandle_page_get).mouse.drag(start, target);\n  }\n  async dragEnter() {\n    let data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      items: [],\n      dragOperationsMask: 1\n    };\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"m\", _CDPElementHandle_scrollIntoViewIfNeeded).call(this);\n    const target = await this.clickablePoint();\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"a\", _CDPElementHandle_page_get).mouse.dragEnter(target, data);\n  }\n  async dragOver() {\n    let data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      items: [],\n      dragOperationsMask: 1\n    };\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"m\", _CDPElementHandle_scrollIntoViewIfNeeded).call(this);\n    const target = await this.clickablePoint();\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"a\", _CDPElementHandle_page_get).mouse.dragOver(target, data);\n  }\n  async drop() {\n    let data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      items: [],\n      dragOperationsMask: 1\n    };\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"m\", _CDPElementHandle_scrollIntoViewIfNeeded).call(this);\n    const destination = await this.clickablePoint();\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"a\", _CDPElementHandle_page_get).mouse.drop(destination, data);\n  }\n  async dragAndDrop(target, options) {\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"m\", _CDPElementHandle_scrollIntoViewIfNeeded).call(this);\n    const startPoint = await this.clickablePoint();\n    const targetPoint = await target.clickablePoint();\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"a\", _CDPElementHandle_page_get).mouse.dragAndDrop(startPoint, targetPoint, options);\n  }\n  async select() {\n    for (var _len4 = arguments.length, values = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      values[_key4] = arguments[_key4];\n    }\n    for (const value of values) {\n      assert(isString(value), 'Values must be strings. Found value \"' + value + '\" of type \"' + typeof value + '\"');\n    }\n    return this.evaluate((element, vals) => {\n      const values = new Set(vals);\n      if (!(element instanceof HTMLSelectElement)) {\n        throw new Error('Element is not a <select> element.');\n      }\n      const selectedValues = new Set();\n      if (!element.multiple) {\n        for (const option of element.options) {\n          option.selected = false;\n        }\n        for (const option of element.options) {\n          if (values.has(option.value)) {\n            option.selected = true;\n            selectedValues.add(option.value);\n            break;\n          }\n        }\n      } else {\n        for (const option of element.options) {\n          option.selected = values.has(option.value);\n          if (option.selected) {\n            selectedValues.add(option.value);\n          }\n        }\n      }\n      element.dispatchEvent(new Event('input', {\n        bubbles: true\n      }));\n      element.dispatchEvent(new Event('change', {\n        bubbles: true\n      }));\n      return [...selectedValues.values()];\n    }, values);\n  }\n  async uploadFile() {\n    const isMultiple = await this.evaluate(element => {\n      return element.multiple;\n    });\n    for (var _len5 = arguments.length, filePaths = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      filePaths[_key5] = arguments[_key5];\n    }\n    assert(filePaths.length <= 1 || isMultiple, 'Multiple file uploads only work with <input type=file multiple>');\n    // Locate all files and confirm that they exist.\n    let path;\n    try {\n      path = await import('path');\n    } catch (error) {\n      if (error instanceof TypeError) {\n        throw new Error(`JSHandle#uploadFile can only be used in Node-like environments.`);\n      }\n      throw error;\n    }\n    const files = filePaths.map(filePath => {\n      if (path.win32.isAbsolute(filePath) || path.posix.isAbsolute(filePath)) {\n        return filePath;\n      } else {\n        return path.resolve(filePath);\n      }\n    });\n    const {\n      objectId\n    } = this.remoteObject();\n    const {\n      node\n    } = await this.client.send('DOM.describeNode', {\n      objectId\n    });\n    const {\n      backendNodeId\n    } = node;\n    /*  The zero-length array is a special case, it seems that\n         DOM.setFileInputFiles does not actually update the files in that case,\n         so the solution is to eval the element value to a new FileList directly.\n     */\n    if (files.length === 0) {\n      await this.evaluate(element => {\n        element.files = new DataTransfer().files;\n        // Dispatch events for this case because it should behave akin to a user action.\n        element.dispatchEvent(new Event('input', {\n          bubbles: true\n        }));\n        element.dispatchEvent(new Event('change', {\n          bubbles: true\n        }));\n      });\n    } else {\n      await this.client.send('DOM.setFileInputFiles', {\n        objectId,\n        files,\n        backendNodeId\n      });\n    }\n  }\n  async tap() {\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"m\", _CDPElementHandle_scrollIntoViewIfNeeded).call(this);\n    const {\n      x,\n      y\n    } = await this.clickablePoint();\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"a\", _CDPElementHandle_page_get).touchscreen.touchStart(x, y);\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"a\", _CDPElementHandle_page_get).touchscreen.touchEnd();\n  }\n  async touchStart() {\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"m\", _CDPElementHandle_scrollIntoViewIfNeeded).call(this);\n    const {\n      x,\n      y\n    } = await this.clickablePoint();\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"a\", _CDPElementHandle_page_get).touchscreen.touchStart(x, y);\n  }\n  async touchMove() {\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"m\", _CDPElementHandle_scrollIntoViewIfNeeded).call(this);\n    const {\n      x,\n      y\n    } = await this.clickablePoint();\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"a\", _CDPElementHandle_page_get).touchscreen.touchMove(x, y);\n  }\n  async touchEnd() {\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"m\", _CDPElementHandle_scrollIntoViewIfNeeded).call(this);\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"a\", _CDPElementHandle_page_get).touchscreen.touchEnd();\n  }\n  async focus() {\n    await this.evaluate(element => {\n      if (!(element instanceof HTMLElement)) {\n        throw new Error('Cannot focus non-HTMLElement');\n      }\n      return element.focus();\n    });\n  }\n  async type(text, options) {\n    await this.focus();\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"a\", _CDPElementHandle_page_get).keyboard.type(text, options);\n  }\n  async press(key, options) {\n    await this.focus();\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"a\", _CDPElementHandle_page_get).keyboard.press(key, options);\n  }\n  async boundingBox() {\n    const result = await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"m\", _CDPElementHandle_getBoxModel).call(this);\n    if (!result) {\n      return null;\n    }\n    const {\n      offsetX,\n      offsetY\n    } = await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"m\", _CDPElementHandle_getOOPIFOffsets).call(this, __classPrivateFieldGet(this, _CDPElementHandle_frame, \"f\"));\n    const quad = result.model.border;\n    const x = Math.min(quad[0], quad[2], quad[4], quad[6]);\n    const y = Math.min(quad[1], quad[3], quad[5], quad[7]);\n    const width = Math.max(quad[0], quad[2], quad[4], quad[6]) - x;\n    const height = Math.max(quad[1], quad[3], quad[5], quad[7]) - y;\n    return {\n      x: x + offsetX,\n      y: y + offsetY,\n      width,\n      height\n    };\n  }\n  async boxModel() {\n    const result = await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"m\", _CDPElementHandle_getBoxModel).call(this);\n    if (!result) {\n      return null;\n    }\n    const {\n      offsetX,\n      offsetY\n    } = await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"m\", _CDPElementHandle_getOOPIFOffsets).call(this, __classPrivateFieldGet(this, _CDPElementHandle_frame, \"f\"));\n    const {\n      content,\n      padding,\n      border,\n      margin,\n      width,\n      height\n    } = result.model;\n    return {\n      content: applyOffsetsToQuad(__classPrivateFieldGet(this, _CDPElementHandle_instances, \"m\", _CDPElementHandle_fromProtocolQuad).call(this, content), offsetX, offsetY),\n      padding: applyOffsetsToQuad(__classPrivateFieldGet(this, _CDPElementHandle_instances, \"m\", _CDPElementHandle_fromProtocolQuad).call(this, padding), offsetX, offsetY),\n      border: applyOffsetsToQuad(__classPrivateFieldGet(this, _CDPElementHandle_instances, \"m\", _CDPElementHandle_fromProtocolQuad).call(this, border), offsetX, offsetY),\n      margin: applyOffsetsToQuad(__classPrivateFieldGet(this, _CDPElementHandle_instances, \"m\", _CDPElementHandle_fromProtocolQuad).call(this, margin), offsetX, offsetY),\n      width,\n      height\n    };\n  }\n  async screenshot() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let needsViewportReset = false;\n    let boundingBox = await this.boundingBox();\n    assert(boundingBox, 'Node is either not visible or not an HTMLElement');\n    const viewport = __classPrivateFieldGet(this, _CDPElementHandle_instances, \"a\", _CDPElementHandle_page_get).viewport();\n    if (viewport && (boundingBox.width > viewport.width || boundingBox.height > viewport.height)) {\n      const newViewport = {\n        width: Math.max(viewport.width, Math.ceil(boundingBox.width)),\n        height: Math.max(viewport.height, Math.ceil(boundingBox.height))\n      };\n      await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"a\", _CDPElementHandle_page_get).setViewport(Object.assign({}, viewport, newViewport));\n      needsViewportReset = true;\n    }\n    await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"m\", _CDPElementHandle_scrollIntoViewIfNeeded).call(this);\n    boundingBox = await this.boundingBox();\n    assert(boundingBox, 'Node is either not visible or not an HTMLElement');\n    assert(boundingBox.width !== 0, 'Node has 0 width.');\n    assert(boundingBox.height !== 0, 'Node has 0 height.');\n    const layoutMetrics = await this.client.send('Page.getLayoutMetrics');\n    // Fallback to `layoutViewport` in case of using Firefox.\n    const {\n      pageX,\n      pageY\n    } = layoutMetrics.cssVisualViewport || layoutMetrics.layoutViewport;\n    const clip = Object.assign({}, boundingBox);\n    clip.x += pageX;\n    clip.y += pageY;\n    const imageData = await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"a\", _CDPElementHandle_page_get).screenshot(Object.assign({}, {\n      clip\n    }, options));\n    if (needsViewportReset && viewport) {\n      await __classPrivateFieldGet(this, _CDPElementHandle_instances, \"a\", _CDPElementHandle_page_get).setViewport(viewport);\n    }\n    return imageData;\n  }\n  async isIntersectingViewport(options) {\n    const {\n      threshold = 0\n    } = options !== null && options !== void 0 ? options : {};\n    return await this.evaluate(async (element, threshold) => {\n      const visibleRatio = await new Promise(resolve => {\n        const observer = new IntersectionObserver(entries => {\n          resolve(entries[0].intersectionRatio);\n          observer.disconnect();\n        });\n        observer.observe(element);\n      });\n      return threshold === 1 ? visibleRatio === 1 : visibleRatio > threshold;\n    }, threshold);\n  }\n}\n_CDPElementHandle_frame = new WeakMap(), _CDPElementHandle_instances = new WeakSet(), _CDPElementHandle_frameManager_get = function _CDPElementHandle_frameManager_get() {\n  return __classPrivateFieldGet(this, _CDPElementHandle_frame, \"f\")._frameManager;\n}, _CDPElementHandle_page_get = function _CDPElementHandle_page_get() {\n  return __classPrivateFieldGet(this, _CDPElementHandle_frame, \"f\").page();\n}, _CDPElementHandle_scrollIntoViewIfNeeded = async function _CDPElementHandle_scrollIntoViewIfNeeded() {\n  const error = await this.evaluate(async element => {\n    if (!element.isConnected) {\n      return 'Node is detached from document';\n    }\n    if (element.nodeType !== Node.ELEMENT_NODE) {\n      return 'Node is not of type HTMLElement';\n    }\n    return;\n  });\n  if (error) {\n    throw new Error(error);\n  }\n  try {\n    await this.client.send('DOM.scrollIntoViewIfNeeded', {\n      objectId: this.remoteObject().objectId\n    });\n  } catch (_err) {\n    // Fallback to Element.scrollIntoView if DOM.scrollIntoViewIfNeeded is not supported\n    await this.evaluate(async (element, pageJavascriptEnabled) => {\n      const visibleRatio = async () => {\n        return await new Promise(resolve => {\n          const observer = new IntersectionObserver(entries => {\n            resolve(entries[0].intersectionRatio);\n            observer.disconnect();\n          });\n          observer.observe(element);\n        });\n      };\n      if (!pageJavascriptEnabled || (await visibleRatio()) !== 1.0) {\n        element.scrollIntoView({\n          block: 'center',\n          inline: 'center',\n          // @ts-expect-error Chrome still supports behavior: instant but\n          // it's not in the spec so TS shouts We don't want to make this\n          // breaking change in Puppeteer yet so we'll ignore the line.\n          behavior: 'instant'\n        });\n      }\n    }, __classPrivateFieldGet(this, _CDPElementHandle_instances, \"a\", _CDPElementHandle_page_get).isJavaScriptEnabled());\n  }\n}, _CDPElementHandle_getOOPIFOffsets = async function _CDPElementHandle_getOOPIFOffsets(frame) {\n  let offsetX = 0;\n  let offsetY = 0;\n  let currentFrame = frame;\n  while (currentFrame && currentFrame.parentFrame()) {\n    const parent = currentFrame.parentFrame();\n    if (!currentFrame.isOOPFrame() || !parent) {\n      currentFrame = parent;\n      continue;\n    }\n    const {\n      backendNodeId\n    } = await parent._client().send('DOM.getFrameOwner', {\n      frameId: currentFrame._id\n    });\n    const result = await parent._client().send('DOM.getBoxModel', {\n      backendNodeId: backendNodeId\n    });\n    if (!result) {\n      break;\n    }\n    const contentBoxQuad = result.model.content;\n    const topLeftCorner = __classPrivateFieldGet(this, _CDPElementHandle_instances, \"m\", _CDPElementHandle_fromProtocolQuad).call(this, contentBoxQuad)[0];\n    offsetX += topLeftCorner.x;\n    offsetY += topLeftCorner.y;\n    currentFrame = parent;\n  }\n  return {\n    offsetX,\n    offsetY\n  };\n}, _CDPElementHandle_getBoxModel = function _CDPElementHandle_getBoxModel() {\n  const params = {\n    objectId: this.id\n  };\n  return this.client.send('DOM.getBoxModel', params).catch(error => {\n    return debugError(error);\n  });\n}, _CDPElementHandle_fromProtocolQuad = function _CDPElementHandle_fromProtocolQuad(quad) {\n  return [{\n    x: quad[0],\n    y: quad[1]\n  }, {\n    x: quad[2],\n    y: quad[3]\n  }, {\n    x: quad[4],\n    y: quad[5]\n  }, {\n    x: quad[6],\n    y: quad[7]\n  }];\n}, _CDPElementHandle_intersectQuadWithViewport = function _CDPElementHandle_intersectQuadWithViewport(quad, width, height) {\n  return quad.map(point => {\n    return {\n      x: Math.min(Math.max(point.x, 0), width),\n      y: Math.min(Math.max(point.y, 0), height)\n    };\n  });\n};\nfunction computeQuadArea(quad) {\n  /* Compute sum of all directed areas of adjacent triangles\n     https://en.wikipedia.org/wiki/Polygon#Simple_polygons\n   */\n  let area = 0;\n  for (let i = 0; i < quad.length; ++i) {\n    const p1 = quad[i];\n    const p2 = quad[(i + 1) % quad.length];\n    area += (p1.x * p2.y - p2.x * p1.y) / 2;\n  }\n  return Math.abs(area);\n}","map":{"version":3,"names":["ElementHandle","assert","AsyncIterableUtil","getQueryHandlerAndSelector","CDPJSHandle","debugError","isString","applyOffsetsToQuad","quad","offsetX","offsetY","map","part","x","y","CDPElementHandle","constructor","context","remoteObject","frame","_CDPElementHandle_frame","set","__classPrivateFieldSet","executionContext","handle","client","__classPrivateFieldGet","$","selector","updatedSelector","QueryHandler","queryOne","$$","collect","queryAll","$eval","pageFunction","elementHandle","Error","_len","arguments","length","args","Array","_key","result","evaluate","dispose","$$eval","results","elements","evaluateHandle","_","_len3","_key3","_len2","_key2","Promise","all","$x","expression","startsWith","waitForSelector","options","undefined","waitFor","waitForXPath","xpath","toElement","tagName","isMatchingTagName","node","nodeName","toUpperCase","contentFrame","nodeInfo","send","objectId","frameId","_CDPElementHandle_instances","_CDPElementHandle_frameManager_get","clickablePoint","offset","layoutMetrics","catch","_CDPElementHandle_page_get","_client","quads","clientWidth","clientHeight","cssLayoutViewport","layoutViewport","_CDPElementHandle_getOOPIFOffsets","call","_CDPElementHandle_fromProtocolQuad","_CDPElementHandle_intersectQuadWithViewport","filter","computeQuadArea","minX","Number","MAX_SAFE_INTEGER","minY","point","hover","_CDPElementHandle_scrollIntoViewIfNeeded","mouse","move","click","drag","target","isDragInterceptionEnabled","start","dragEnter","data","items","dragOperationsMask","dragOver","drop","destination","dragAndDrop","startPoint","targetPoint","select","_len4","values","_key4","value","element","vals","Set","HTMLSelectElement","selectedValues","multiple","option","selected","has","add","dispatchEvent","Event","bubbles","uploadFile","isMultiple","_len5","filePaths","_key5","path","error","TypeError","files","filePath","win32","isAbsolute","posix","resolve","backendNodeId","DataTransfer","tap","touchscreen","touchStart","touchEnd","touchMove","focus","HTMLElement","type","text","keyboard","press","key","boundingBox","_CDPElementHandle_getBoxModel","model","border","Math","min","width","max","height","boxModel","content","padding","margin","screenshot","needsViewportReset","viewport","newViewport","ceil","setViewport","Object","assign","pageX","pageY","cssVisualViewport","clip","imageData","isIntersectingViewport","threshold","visibleRatio","observer","IntersectionObserver","entries","intersectionRatio","disconnect","observe","_frameManager","page","isConnected","nodeType","Node","ELEMENT_NODE","_err","pageJavascriptEnabled","scrollIntoView","block","inline","behavior","isJavaScriptEnabled","currentFrame","parentFrame","parent","isOOPFrame","_id","contentBoxQuad","topLeftCorner","params","id","area","i","p1","p2","abs"],"sources":["../../../../src/common/ElementHandle.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}