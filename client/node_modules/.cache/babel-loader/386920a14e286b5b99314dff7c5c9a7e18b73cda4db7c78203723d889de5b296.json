{"ast":null,"code":"var __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\nvar _ScriptInjector_instances, _ScriptInjector_updated, _ScriptInjector_amendments, _ScriptInjector_update, _ScriptInjector_get;\nimport { source as injectedSource } from '../generated/injected.js';\nclass ScriptInjector {\n  constructor() {\n    _ScriptInjector_instances.add(this);\n    _ScriptInjector_updated.set(this, false);\n    _ScriptInjector_amendments.set(this, new Set());\n  }\n  // Appends a statement of the form `(PuppeteerUtil) => {...}`.\n  append(statement) {\n    __classPrivateFieldGet(this, _ScriptInjector_instances, \"m\", _ScriptInjector_update).call(this, () => {\n      __classPrivateFieldGet(this, _ScriptInjector_amendments, \"f\").add(statement);\n    });\n  }\n  pop(statement) {\n    __classPrivateFieldGet(this, _ScriptInjector_instances, \"m\", _ScriptInjector_update).call(this, () => {\n      __classPrivateFieldGet(this, _ScriptInjector_amendments, \"f\").delete(statement);\n    });\n  }\n  inject(inject) {\n    let force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (__classPrivateFieldGet(this, _ScriptInjector_updated, \"f\") || force) {\n      inject(__classPrivateFieldGet(this, _ScriptInjector_instances, \"m\", _ScriptInjector_get).call(this));\n    }\n    __classPrivateFieldSet(this, _ScriptInjector_updated, false, \"f\");\n  }\n}\n_ScriptInjector_updated = new WeakMap(), _ScriptInjector_amendments = new WeakMap(), _ScriptInjector_instances = new WeakSet(), _ScriptInjector_update = function _ScriptInjector_update(callback) {\n  callback();\n  __classPrivateFieldSet(this, _ScriptInjector_updated, true, \"f\");\n}, _ScriptInjector_get = function _ScriptInjector_get() {\n  return `(() => {\n      const module = {};\n      ${injectedSource}\n      ${[...__classPrivateFieldGet(this, _ScriptInjector_amendments, \"f\")].map(statement => {\n    return `(${statement})(module.exports.default);`;\n  }).join('')}\n      return module.exports.default;\n    })()`;\n};\n/**\n * @internal\n */\nexport const scriptInjector = new ScriptInjector();","map":{"version":3,"names":["source","injectedSource","ScriptInjector","constructor","_ScriptInjector_updated","set","_ScriptInjector_amendments","Set","append","statement","__classPrivateFieldGet","_ScriptInjector_instances","_ScriptInjector_update","call","add","pop","delete","inject","force","arguments","length","undefined","_ScriptInjector_get","__classPrivateFieldSet","callback","map","join","scriptInjector"],"sources":["../../../../src/common/ScriptInjector.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;AAAA,SAAQA,MAAM,IAAIC,cAAc,QAAO,0BAA0B;AAEjE,MAAMC,cAAc;EAApBC,YAAA;;IACEC,uBAAA,CAAAC,GAAA,OAAW,KAAK;IAChBC,0BAAA,CAAAD,GAAA,OAAc,IAAIE,GAAG,EAAU;EAuCjC;EArCE;EACAC,MAAMA,CAACC,SAAiB;IACtBC,sBAAA,KAAI,EAAAC,yBAAA,OAAAC,sBAAA,CAAQ,CAAAC,IAAA,CAAZ,IAAI,EAAS,MAAK;MAChBH,sBAAA,KAAI,EAAAJ,0BAAA,MAAY,CAACQ,GAAG,CAACL,SAAS,CAAC;IACjC,CAAC,CAAC;EACJ;EAEAM,GAAGA,CAACN,SAAiB;IACnBC,sBAAA,KAAI,EAAAC,yBAAA,OAAAC,sBAAA,CAAQ,CAAAC,IAAA,CAAZ,IAAI,EAAS,MAAK;MAChBH,sBAAA,KAAI,EAAAJ,0BAAA,MAAY,CAACU,MAAM,CAACP,SAAS,CAAC;IACpC,CAAC,CAAC;EACJ;EAEAQ,MAAMA,CAACA,MAAgC,EAAe;IAAA,IAAbC,KAAK,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;IACpD,IAAIT,sBAAA,KAAI,EAAAN,uBAAA,MAAS,IAAIc,KAAK,EAAE;MAC1BD,MAAM,CAACP,sBAAA,KAAI,EAAAC,yBAAA,OAAAW,mBAAA,CAAK,CAAAT,IAAA,CAAT,IAAI,CAAO,CAAC;;IAErBU,sBAAA,KAAI,EAAAnB,uBAAA,EAAY,KAAK;EACvB;;yLAEQoB,QAAoB;EAC1BA,QAAQ,EAAE;EACVD,sBAAA,KAAI,EAAAnB,uBAAA,EAAY,IAAI;AACtB,CAAC,EAAAkB,mBAAA,YAAAA,oBAAA;EAGC,OAAO;;QAEHrB,cAAc;QACd,CAAC,GAAGS,sBAAA,KAAI,EAAAJ,0BAAA,MAAY,CAAC,CACpBmB,GAAG,CAAChB,SAAS,IAAG;IACf,OAAO,IAAIA,SAAS,4BAA4B;EAClD,CAAC,CAAC,CACDiB,IAAI,CAAC,EAAE,CAAC;;SAER;AACP,CAAC;AAGH;;;AAGA,OAAO,MAAMC,cAAc,GAAG,IAAIzB,cAAc,EAAE"},"metadata":{},"sourceType":"module","externalDependencies":[]}